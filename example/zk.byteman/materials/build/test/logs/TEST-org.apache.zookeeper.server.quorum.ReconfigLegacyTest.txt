Testsuite: org.apache.zookeeper.server.quorum.ReconfigLegacyTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 31.823 sec
------------- Standard Output ---------------
2015-05-21 15:14:56,126 [myid:] - INFO  [main:ZKTestCase$1@55] - STARTING testReconfigRemoveClientFromStatic
2015-05-21 15:14:56,135 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@50] - RUNNING TEST METHOD testReconfigRemoveClientFromStatic
2015-05-21 15:14:56,136 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11221
2015-05-21 15:14:56,136 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11222
2015-05-21 15:14:56,136 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11223
2015-05-21 15:14:56,136 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11224
2015-05-21 15:14:56,136 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11225
2015-05-21 15:14:56,136 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11226
2015-05-21 15:14:56,136 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11227
2015-05-21 15:14:56,136 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11228
2015-05-21 15:14:56,136 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11229
2015-05-21 15:14:56,136 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11230
2015-05-21 15:14:56,148 [myid:] - INFO  [main:QuorumPeerTestBase$MainThread@130] - id = 0 tmpDir = /home/mitake/github/zookeeper.git/build/test/tmp/test967699041678849627.junit.dir clientPort = 11222 adminServerPort = 8080
2015-05-21 15:14:56,151 [myid:] - INFO  [main:QuorumPeerTestBase$MainThread@130] - id = 1 tmpDir = /home/mitake/github/zookeeper.git/build/test/tmp/test5063763051698974911.junit.dir clientPort = 11225 adminServerPort = 8080
2015-05-21 15:14:56,151 [myid:] - INFO  [main:QuorumPeerTestBase$MainThread@130] - id = 2 tmpDir = /home/mitake/github/zookeeper.git/build/test/tmp/test7498809730273190416.junit.dir clientPort = 11228 adminServerPort = 8080
2015-05-21 15:14:56,153 [myid:] - INFO  [Thread-0:QuorumPeerConfig@114] - Reading configuration from: /home/mitake/github/zookeeper.git/build/test/tmp/test967699041678849627.junit.dir/zoo.cfg
2015-05-21 15:14:56,153 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11222
2015-05-21 15:14:56,153 [myid:] - INFO  [Thread-1:QuorumPeerConfig@114] - Reading configuration from: /home/mitake/github/zookeeper.git/build/test/tmp/test5063763051698974911.junit.dir/zoo.cfg
2015-05-21 15:14:56,153 [myid:] - INFO  [Thread-2:QuorumPeerConfig@114] - Reading configuration from: /home/mitake/github/zookeeper.git/build/test/tmp/test7498809730273190416.junit.dir/zoo.cfg
2015-05-21 15:14:56,158 [myid:] - INFO  [Thread-1:QuorumPeerConfig@316] - clientPortAddress is 0.0.0.0/0.0.0.0:11225
2015-05-21 15:14:56,158 [myid:] - INFO  [Thread-0:QuorumPeerConfig@316] - clientPortAddress is 0.0.0.0/0.0.0.0:11222
2015-05-21 15:14:56,158 [myid:] - INFO  [Thread-2:QuorumPeerConfig@316] - clientPortAddress is 0.0.0.0/0.0.0.0:11228
2015-05-21 15:14:56,158 [myid:] - INFO  [Thread-0:QuorumPeerConfig@320] - secureClientPort is not set
2015-05-21 15:14:56,158 [myid:] - INFO  [Thread-1:QuorumPeerConfig@320] - secureClientPort is not set
2015-05-21 15:14:56,158 [myid:] - INFO  [Thread-2:QuorumPeerConfig@320] - secureClientPort is not set
2015-05-21 15:14:56,160 [myid:] - INFO  [main:ClientBase@249] - server 127.0.0.1:11222 not up
java.net.ConnectException: Connection refused
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:579)
	at java.net.Socket.connect(Socket.java:528)
	at java.net.Socket.<init>(Socket.java:425)
	at java.net.Socket.<init>(Socket.java:208)
	at org.apache.zookeeper.client.FourLetterWordMain.send4LetterWord(FourLetterWordMain.java:74)
	at org.apache.zookeeper.test.ClientBase.waitForServerUp(ClientBase.java:242)
	at org.apache.zookeeper.test.ClientBase.waitForServerUp(ClientBase.java:233)
	at org.apache.zookeeper.server.quorum.ReconfigLegacyTest.testReconfigRemoveClientFromStatic(ReconfigLegacyTest.java:187)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:52)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:69)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:532)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1165)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1016)
2015-05-21 15:14:56,178 [myid:2] - INFO  [Thread-2:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2015-05-21 15:14:56,178 [myid:0] - INFO  [Thread-0:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2015-05-21 15:14:56,178 [myid:1] - INFO  [Thread-1:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2015-05-21 15:14:56,178 [myid:0] - INFO  [Thread-0:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2015-05-21 15:14:56,178 [myid:2] - INFO  [Thread-2:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2015-05-21 15:14:56,178 [myid:0] - INFO  [Thread-0:DatadirCleanupManager@101] - Purge task is not scheduled.
2015-05-21 15:14:56,178 [myid:1] - INFO  [Thread-1:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2015-05-21 15:14:56,178 [myid:2] - INFO  [Thread-2:DatadirCleanupManager@101] - Purge task is not scheduled.
2015-05-21 15:14:56,178 [myid:1] - INFO  [Thread-1:DatadirCleanupManager@101] - Purge task is not scheduled.
2015-05-21 15:14:56,236 [myid:0] - ERROR [Thread-0:AppenderDynamicMBean@209] - Could not add DynamicLayoutMBean for [CONSOLE,layout=org.apache.log4j.PatternLayout].
javax.management.InstanceAlreadyExistsException: log4j:appender=CONSOLE,layout=org.apache.log4j.PatternLayout
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.log4j.jmx.AbstractDynamicMBean.registerMBean(AbstractDynamicMBean.java:160)
	at org.apache.log4j.jmx.AppenderDynamicMBean.registerLayoutMBean(AppenderDynamicMBean.java:203)
	at org.apache.log4j.jmx.AppenderDynamicMBean.preRegister(AppenderDynamicMBean.java:339)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.preRegister(DefaultMBeanServerInterceptor.java:1007)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:919)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.log4j.jmx.AbstractDynamicMBean.registerMBean(AbstractDynamicMBean.java:160)
	at org.apache.log4j.jmx.LoggerDynamicMBean.registerAppenderMBean(LoggerDynamicMBean.java:264)
	at org.apache.log4j.jmx.LoggerDynamicMBean.appenderMBeanRegistration(LoggerDynamicMBean.java:252)
	at org.apache.log4j.jmx.LoggerDynamicMBean.postRegister(LoggerDynamicMBean.java:280)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.postRegister(DefaultMBeanServerInterceptor.java:1024)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:974)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.log4j.jmx.AbstractDynamicMBean.registerMBean(AbstractDynamicMBean.java:160)
	at org.apache.log4j.jmx.HierarchyDynamicMBean.addLoggerMBean(HierarchyDynamicMBean.java:125)
	at org.apache.log4j.jmx.HierarchyDynamicMBean.postRegister(HierarchyDynamicMBean.java:263)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.postRegister(DefaultMBeanServerInterceptor.java:1024)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:974)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:53)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:131)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:120)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:240)
	at java.lang.Thread.run(Thread.java:745)
2015-05-21 15:14:56,236 [myid:1] - ERROR [Thread-1:HierarchyDynamicMBean@138] - Could not add loggerMBean for [root].
javax.management.InstanceAlreadyExistsException: log4j:logger=root
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.log4j.jmx.AbstractDynamicMBean.registerMBean(AbstractDynamicMBean.java:160)
	at org.apache.log4j.jmx.HierarchyDynamicMBean.addLoggerMBean(HierarchyDynamicMBean.java:125)
	at org.apache.log4j.jmx.HierarchyDynamicMBean.postRegister(HierarchyDynamicMBean.java:263)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.postRegister(DefaultMBeanServerInterceptor.java:1024)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:974)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:53)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:131)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:120)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:240)
	at java.lang.Thread.run(Thread.java:745)
2015-05-21 15:14:56,236 [myid:2] - ERROR [Thread-2:AppenderDynamicMBean@209] - Could not add DynamicLayoutMBean for [CONSOLE,layout=org.apache.log4j.PatternLayout].
javax.management.InstanceAlreadyExistsException: log4j:appender=CONSOLE,layout=org.apache.log4j.PatternLayout
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.log4j.jmx.AbstractDynamicMBean.registerMBean(AbstractDynamicMBean.java:160)
	at org.apache.log4j.jmx.AppenderDynamicMBean.registerLayoutMBean(AppenderDynamicMBean.java:203)
	at org.apache.log4j.jmx.AppenderDynamicMBean.preRegister(AppenderDynamicMBean.java:339)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.preRegister(DefaultMBeanServerInterceptor.java:1007)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:919)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.log4j.jmx.AbstractDynamicMBean.registerMBean(AbstractDynamicMBean.java:160)
	at org.apache.log4j.jmx.LoggerDynamicMBean.registerAppenderMBean(LoggerDynamicMBean.java:264)
	at org.apache.log4j.jmx.LoggerDynamicMBean.appenderMBeanRegistration(LoggerDynamicMBean.java:252)
	at org.apache.log4j.jmx.LoggerDynamicMBean.postRegister(LoggerDynamicMBean.java:280)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.postRegister(DefaultMBeanServerInterceptor.java:1024)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:974)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.log4j.jmx.AbstractDynamicMBean.registerMBean(AbstractDynamicMBean.java:160)
	at org.apache.log4j.jmx.HierarchyDynamicMBean.addLoggerMBean(HierarchyDynamicMBean.java:125)
	at org.apache.log4j.jmx.HierarchyDynamicMBean.postRegister(HierarchyDynamicMBean.java:263)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.postRegister(DefaultMBeanServerInterceptor.java:1024)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:974)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:53)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:131)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:120)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:240)
	at java.lang.Thread.run(Thread.java:745)
2015-05-21 15:14:56,237 [myid:1] - WARN  [Thread-1:QuorumPeerMain@133] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:53)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:131)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:120)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:240)
	at java.lang.Thread.run(Thread.java:745)
2015-05-21 15:14:56,237 [myid:0] - ERROR [Thread-0:LoggerDynamicMBean@270] - Could not add appenderMBean for [CONSOLE].
javax.management.InstanceAlreadyExistsException: log4j:appender=CONSOLE
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.log4j.jmx.AbstractDynamicMBean.registerMBean(AbstractDynamicMBean.java:160)
	at org.apache.log4j.jmx.LoggerDynamicMBean.registerAppenderMBean(LoggerDynamicMBean.java:264)
	at org.apache.log4j.jmx.LoggerDynamicMBean.appenderMBeanRegistration(LoggerDynamicMBean.java:252)
	at org.apache.log4j.jmx.LoggerDynamicMBean.postRegister(LoggerDynamicMBean.java:280)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.postRegister(DefaultMBeanServerInterceptor.java:1024)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:974)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.log4j.jmx.AbstractDynamicMBean.registerMBean(AbstractDynamicMBean.java:160)
	at org.apache.log4j.jmx.HierarchyDynamicMBean.addLoggerMBean(HierarchyDynamicMBean.java:125)
	at org.apache.log4j.jmx.HierarchyDynamicMBean.postRegister(HierarchyDynamicMBean.java:263)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.postRegister(DefaultMBeanServerInterceptor.java:1024)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:974)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:53)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:131)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:120)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:240)
	at java.lang.Thread.run(Thread.java:745)
2015-05-21 15:14:56,239 [myid:1] - INFO  [Thread-1:QuorumPeerMain@136] - Starting quorum peer
2015-05-21 15:14:56,239 [myid:2] - ERROR [Thread-2:LoggerDynamicMBean@270] - Could not add appenderMBean for [CONSOLE].
javax.management.InstanceAlreadyExistsException: log4j:appender=CONSOLE
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.log4j.jmx.AbstractDynamicMBean.registerMBean(AbstractDynamicMBean.java:160)
	at org.apache.log4j.jmx.LoggerDynamicMBean.registerAppenderMBean(LoggerDynamicMBean.java:264)
	at org.apache.log4j.jmx.LoggerDynamicMBean.appenderMBeanRegistration(LoggerDynamicMBean.java:252)
	at org.apache.log4j.jmx.LoggerDynamicMBean.postRegister(LoggerDynamicMBean.java:280)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.postRegister(DefaultMBeanServerInterceptor.java:1024)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:974)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.log4j.jmx.AbstractDynamicMBean.registerMBean(AbstractDynamicMBean.java:160)
	at org.apache.log4j.jmx.HierarchyDynamicMBean.addLoggerMBean(HierarchyDynamicMBean.java:125)
	at org.apache.log4j.jmx.HierarchyDynamicMBean.postRegister(HierarchyDynamicMBean.java:263)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.postRegister(DefaultMBeanServerInterceptor.java:1024)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:974)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:53)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:131)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:120)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:240)
	at java.lang.Thread.run(Thread.java:745)
2015-05-21 15:14:56,240 [myid:0] - WARN  [Thread-0:QuorumPeerMain@133] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:53)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:131)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:120)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:240)
	at java.lang.Thread.run(Thread.java:745)
2015-05-21 15:14:56,242 [myid:0] - INFO  [Thread-0:QuorumPeerMain@136] - Starting quorum peer
2015-05-21 15:14:56,242 [myid:2] - ERROR [Thread-2:HierarchyDynamicMBean@138] - Could not add loggerMBean for [root].
javax.management.InstanceAlreadyExistsException: log4j:logger=root
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.log4j.jmx.AbstractDynamicMBean.registerMBean(AbstractDynamicMBean.java:160)
	at org.apache.log4j.jmx.HierarchyDynamicMBean.addLoggerMBean(HierarchyDynamicMBean.java:125)
	at org.apache.log4j.jmx.HierarchyDynamicMBean.postRegister(HierarchyDynamicMBean.java:263)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.postRegister(DefaultMBeanServerInterceptor.java:1024)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:974)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:53)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:131)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:120)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:240)
	at java.lang.Thread.run(Thread.java:745)
2015-05-21 15:14:56,246 [myid:2] - INFO  [Thread-2:QuorumPeerMain@136] - Starting quorum peer
2015-05-21 15:14:56,249 [myid:1] - INFO  [Thread-1:NIOServerCnxnFactory@673] - Configuring NIO connection handler with 10s sessionless connection timeout, 2 selector thread(s), 24 worker threads, and 64 kB direct buffers.
2015-05-21 15:14:56,249 [myid:0] - INFO  [Thread-0:NIOServerCnxnFactory@673] - Configuring NIO connection handler with 10s sessionless connection timeout, 2 selector thread(s), 24 worker threads, and 64 kB direct buffers.
2015-05-21 15:14:56,249 [myid:2] - INFO  [Thread-2:NIOServerCnxnFactory@673] - Configuring NIO connection handler with 10s sessionless connection timeout, 2 selector thread(s), 24 worker threads, and 64 kB direct buffers.
2015-05-21 15:14:56,253 [myid:1] - INFO  [Thread-1:NIOServerCnxnFactory@686] - binding to port 0.0.0.0/0.0.0.0:11225
2015-05-21 15:14:56,253 [myid:2] - INFO  [Thread-2:NIOServerCnxnFactory@686] - binding to port 0.0.0.0/0.0.0.0:11228
2015-05-21 15:14:56,253 [myid:0] - INFO  [Thread-0:NIOServerCnxnFactory@686] - binding to port 0.0.0.0/0.0.0.0:11222
2015-05-21 15:14:56,262 [myid:1] - INFO  [Thread-1:QuorumPeer@1181] - Local sessions disabled
2015-05-21 15:14:56,262 [myid:0] - INFO  [Thread-0:QuorumPeer@1181] - Local sessions disabled
2015-05-21 15:14:56,262 [myid:2] - INFO  [Thread-2:QuorumPeer@1181] - Local sessions disabled
2015-05-21 15:14:56,262 [myid:0] - INFO  [Thread-0:QuorumPeer@1192] - Local session upgrading disabled
2015-05-21 15:14:56,262 [myid:1] - INFO  [Thread-1:QuorumPeer@1192] - Local session upgrading disabled
2015-05-21 15:14:56,262 [myid:0] - INFO  [Thread-0:QuorumPeer@1159] - tickTime set to 4000
2015-05-21 15:14:56,262 [myid:0] - INFO  [Thread-0:QuorumPeer@1203] - minSessionTimeout set to 8000
2015-05-21 15:14:56,262 [myid:2] - INFO  [Thread-2:QuorumPeer@1192] - Local session upgrading disabled
2015-05-21 15:14:56,262 [myid:0] - INFO  [Thread-0:QuorumPeer@1214] - maxSessionTimeout set to 80000
2015-05-21 15:14:56,262 [myid:1] - INFO  [Thread-1:QuorumPeer@1159] - tickTime set to 4000
2015-05-21 15:14:56,262 [myid:0] - INFO  [Thread-0:QuorumPeer@1229] - initLimit set to 10
2015-05-21 15:14:56,262 [myid:2] - INFO  [Thread-2:QuorumPeer@1159] - tickTime set to 4000
2015-05-21 15:14:56,262 [myid:1] - INFO  [Thread-1:QuorumPeer@1203] - minSessionTimeout set to 8000
2015-05-21 15:14:56,263 [myid:2] - INFO  [Thread-2:QuorumPeer@1203] - minSessionTimeout set to 8000
2015-05-21 15:14:56,263 [myid:1] - INFO  [Thread-1:QuorumPeer@1214] - maxSessionTimeout set to 80000
2015-05-21 15:14:56,263 [myid:2] - INFO  [Thread-2:QuorumPeer@1214] - maxSessionTimeout set to 80000
2015-05-21 15:14:56,263 [myid:1] - INFO  [Thread-1:QuorumPeer@1229] - initLimit set to 10
2015-05-21 15:14:56,263 [myid:2] - INFO  [Thread-2:QuorumPeer@1229] - initLimit set to 10
2015-05-21 15:14:56,272 [myid:2] - INFO  [Thread-2:QuorumPeer@645] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2015-05-21 15:14:56,272 [myid:1] - INFO  [Thread-1:QuorumPeer@645] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2015-05-21 15:14:56,272 [myid:0] - INFO  [Thread-0:QuorumPeer@645] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2015-05-21 15:14:56,286 [myid:0] - INFO  [Thread-0:QuorumPeer@660] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2015-05-21 15:14:56,286 [myid:1] - INFO  [Thread-1:QuorumPeer@660] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2015-05-21 15:14:56,286 [myid:2] - INFO  [Thread-2:QuorumPeer@660] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2015-05-21 15:14:56,306 [myid:0] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@550] - My election bind port: localhost/127.0.0.1:11224
2015-05-21 15:14:56,310 [myid:1] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@550] - My election bind port: localhost/127.0.0.1:11227
2015-05-21 15:14:56,311 [myid:2] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@550] - My election bind port: localhost/127.0.0.1:11230
2015-05-21 15:14:56,315 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):QuorumPeer@887] - LOOKING
2015-05-21 15:14:56,315 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):QuorumPeer@887] - LOOKING
2015-05-21 15:14:56,315 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):QuorumPeer@887] - LOOKING
2015-05-21 15:14:56,316 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):FastLeaderElection@889] - New election. My id =  0, proposed zxid=0x0
2015-05-21 15:14:56,316 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):FastLeaderElection@889] - New election. My id =  2, proposed zxid=0x0
2015-05-21 15:14:56,316 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):FastLeaderElection@889] - New election. My id =  1, proposed zxid=0x0
2015-05-21 15:14:56,317 [myid:0] - INFO  [localhost/127.0.0.1:11224:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:55794
2015-05-21 15:14:56,317 [myid:1] - INFO  [localhost/127.0.0.1:11227:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:34065
2015-05-21 15:14:56,318 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@197] - Have smaller server identifier, so dropping the connection: (1, 0)
2015-05-21 15:14:56,318 [myid:2] - INFO  [localhost/127.0.0.1:11230:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:47283
2015-05-21 15:14:56,318 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@197] - Have smaller server identifier, so dropping the connection: (2, 0)
2015-05-21 15:14:56,318 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:14:56,319 [myid:0] - INFO  [localhost/127.0.0.1:11224:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:55795
2015-05-21 15:14:56,320 [myid:1] - INFO  [localhost/127.0.0.1:11227:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:34067
2015-05-21 15:14:56,320 [myid:1] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@197] - Have smaller server identifier, so dropping the connection: (2, 1)
2015-05-21 15:14:56,320 [myid:2] - INFO  [localhost/127.0.0.1:11230:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:47285
2015-05-21 15:14:56,320 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:14:56,320 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:14:56,321 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:14:56,321 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:14:56,321 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:14:56,321 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@683] - Notification: 2 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:14:56,321 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:14:56,321 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:14:56,322 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:14:56,322 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:14:56,322 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:14:56,322 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@683] - Notification: 2 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:14:56,322 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@683] - Notification: 2 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:14:56,322 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:14:56,322 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:14:56,323 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:14:56,323 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:14:56,412 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11222
2015-05-21 15:14:56,414 [myid:0] - INFO  [NIOServerCxnFactory.AcceptThread:0.0.0.0/0.0.0.0:11222:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:39323
2015-05-21 15:14:56,422 [myid:0] - INFO  [NIOWorkerThread-1:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:39323
2015-05-21 15:14:56,425 [myid:0] - INFO  [NIOWorkerThread-1:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:39323 (no session established for client)
2015-05-21 15:14:56,523 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=LeaderElection]
2015-05-21 15:14:56,523 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.0,name2=LeaderElection]
2015-05-21 15:14:56,523 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):QuorumPeer@963] - FOLLOWING
2015-05-21 15:14:56,523 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):QuorumPeer@963] - FOLLOWING
2015-05-21 15:14:56,523 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=LeaderElection]
2015-05-21 15:14:56,524 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):QuorumPeer@975] - LEADING
2015-05-21 15:14:56,528 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):Leader@63] - TCP NoDelay set to: true
2015-05-21 15:14:56,528 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):Leader@83] - zookeeper.leader.maxConcurrentSnapshots = 10
2015-05-21 15:14:56,528 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):Leader@85] - zookeeper.leader.maxConcurrentSnapshotTimeout = 5
2015-05-21 15:14:56,529 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):Learner@88] - TCP NoDelay set to: true
2015-05-21 15:14:56,536 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Environment@109] - Server environment:zookeeper.version=3.6.0-SNAPSHOT--1, built on 04/16/2015 06:13 GMT
2015-05-21 15:14:56,536 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Environment@109] - Server environment:host.name=mitake-jiseki-PC
2015-05-21 15:14:56,536 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Environment@109] - Server environment:java.version=1.7.0_75
2015-05-21 15:14:56,536 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Environment@109] - Server environment:java.vendor=Oracle Corporation
2015-05-21 15:14:56,536 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Environment@109] - Server environment:java.home=/usr/lib/jvm/java-7-openjdk-amd64/jre
2015-05-21 15:14:56,536 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Environment@109] - Server environment:java.class.path=/home/mitake/github/zookeeper.git/build/test/classes:/home/mitake/github/zookeeper.git/build/test/lib/antlr-2.7.6.jar:/home/mitake/github/zookeeper.git/build/test/lib/checkstyle-5.0.jar:/home/mitake/github/zookeeper.git/build/test/lib/commons-beanutils-core-1.7.0.jar:/home/mitake/github/zookeeper.git/build/test/lib/commons-cli-1.0.jar:/home/mitake/github/zookeeper.git/build/test/lib/commons-collections-2.0.jar:/home/mitake/github/zookeeper.git/build/test/lib/commons-lang-1.0.jar:/home/mitake/github/zookeeper.git/build/test/lib/commons-logging-1.0.3.jar:/home/mitake/github/zookeeper.git/build/test/lib/google-collections-0.9.jar:/home/mitake/github/zookeeper.git/build/test/lib/hamcrest-core-1.1.jar:/home/mitake/github/zookeeper.git/build/test/lib/junit-4.9.jar:/home/mitake/github/zookeeper.git/build/test/lib/mockito-all-1.8.2.jar:/home/mitake/github/zookeeper.git/build/classes:/home/mitake/github/zookeeper.git/src/java/lib/aspectjrt.jar:/home/mitake/github/zookeeper.git/src/java/lib/aspectjtools.jar:/home/mitake/github/zookeeper.git/src/java/lib/aspectjweaver.jar:/home/mitake/github/zookeeper.git/src/java/lib/ivy-2.2.0.jar:/home/mitake/github/zookeeper.git/src/java/lib/org.aspectj.matcher.jar:/home/mitake/github/zookeeper.git/src/java/lib/protobuf-java-2.6.1.jar:/usr/share/ant/lib/ant.jar:/home/mitake/github/zookeeper.git/build/lib/commons-cli-1.2.jar:/home/mitake/github/zookeeper.git/build/lib/jackson-core-asl-1.9.11.jar:/home/mitake/github/zookeeper.git/build/lib/jackson-mapper-asl-1.9.11.jar:/home/mitake/github/zookeeper.git/build/lib/javacc.jar:/home/mitake/github/zookeeper.git/build/lib/jetty-6.1.26.jar:/home/mitake/github/zookeeper.git/build/lib/jetty-util-6.1.26.jar:/home/mitake/github/zookeeper.git/build/lib/jline-2.11.jar:/home/mitake/github/zookeeper.git/build/lib/log4j-1.2.16.jar:/home/mitake/github/zookeeper.git/build/lib/netty-3.7.0.Final.jar:/home/mitake/github/zookeeper.git/build/lib/servlet-api-2.5-20081211.jar:/home/mitake/github/zookeeper.git/build/lib/slf4j-api-1.7.5.jar:/home/mitake/github/zookeeper.git/build/lib/slf4j-log4j12-1.7.5.jar:/usr/share/ant/lib/junit.jar:/usr/share/java/ant-launcher-1.9.3.jar:/usr/share/ant/lib/ant-junit.jar:/usr/share/ant/lib/ant-junit4.jar
2015-05-21 15:14:56,536 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Environment@109] - Server environment:java.library.path=/usr/java/packages/lib/amd64:/usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib
2015-05-21 15:14:56,537 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Environment@109] - Server environment:java.io.tmpdir=/tmp
2015-05-21 15:14:56,537 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Environment@109] - Server environment:java.compiler=<NA>
2015-05-21 15:14:56,537 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Environment@109] - Server environment:os.name=Linux
2015-05-21 15:14:56,537 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Environment@109] - Server environment:os.arch=amd64
2015-05-21 15:14:56,537 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Environment@109] - Server environment:os.version=3.13.0-45-generic
2015-05-21 15:14:56,537 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Environment@109] - Server environment:user.name=mitake
2015-05-21 15:14:56,537 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Environment@109] - Server environment:user.home=/home/mitake
2015-05-21 15:14:56,537 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Environment@109] - Server environment:user.dir=/home/mitake/github/zookeeper.git/build/test
2015-05-21 15:14:56,537 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Environment@109] - Server environment:os.memory.free=392MB
2015-05-21 15:14:56,537 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Environment@109] - Server environment:os.memory.max=491MB
2015-05-21 15:14:56,537 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Environment@109] - Server environment:os.memory.total=491MB
2015-05-21 15:14:56,538 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):ZooKeeperServer@825] - minSessionTimeout set to 8000
2015-05-21 15:14:56,538 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):ZooKeeperServer@825] - minSessionTimeout set to 8000
2015-05-21 15:14:56,538 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):ZooKeeperServer@825] - minSessionTimeout set to 8000
2015-05-21 15:14:56,538 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):ZooKeeperServer@834] - maxSessionTimeout set to 80000
2015-05-21 15:14:56,538 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):ZooKeeperServer@834] - maxSessionTimeout set to 80000
2015-05-21 15:14:56,538 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):ZooKeeperServer@156] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /home/mitake/github/zookeeper.git/build/test/tmp/test7498809730273190416.junit.dir/data/version-2 snapdir /home/mitake/github/zookeeper.git/build/test/tmp/test7498809730273190416.junit.dir/data/version-2
2015-05-21 15:14:56,538 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):ZooKeeperServer@834] - maxSessionTimeout set to 80000
2015-05-21 15:14:56,539 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):ZooKeeperServer@156] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /home/mitake/github/zookeeper.git/build/test/tmp/test5063763051698974911.junit.dir/data/version-2 snapdir /home/mitake/github/zookeeper.git/build/test/tmp/test5063763051698974911.junit.dir/data/version-2
2015-05-21 15:14:56,539 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):ZooKeeperServer@156] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /home/mitake/github/zookeeper.git/build/test/tmp/test967699041678849627.junit.dir/data/version-2 snapdir /home/mitake/github/zookeeper.git/build/test/tmp/test967699041678849627.junit.dir/data/version-2
2015-05-21 15:14:56,539 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):Follower@66] - FOLLOWING - LEADER ELECTION TOOK - 16
2015-05-21 15:14:56,539 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Follower@66] - FOLLOWING - LEADER ELECTION TOOK - 16
2015-05-21 15:14:56,540 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):Leader@410] - LEADING - LEADER ELECTION TOOK - 16
2015-05-21 15:14:56,543 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):FileTxnSnapLog@298] - Snapshotting: 0x0 to /home/mitake/github/zookeeper.git/build/test/tmp/test7498809730273190416.junit.dir/data/version-2/snapshot.0
2015-05-21 15:14:56,552 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:41899:LearnerHandler@361] - Follower sid: 1 : info : localhost:11226:11227:participant
2015-05-21 15:14:56,552 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:41900:LearnerHandler@361] - Follower sid: 0 : info : localhost:11223:11224:participant
2015-05-21 15:14:56,576 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:41899:LearnerHandler@659] - Synchronizing with Follower sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x0 peerLastZxid=0x0
2015-05-21 15:14:56,576 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:41900:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x0 peerLastZxid=0x0
2015-05-21 15:14:56,576 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:41899:LearnerHandler@703] - Sending DIFF zxid=0x0 for peer sid: 1
2015-05-21 15:14:56,577 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:41900:LearnerHandler@703] - Sending DIFF zxid=0x0 for peer sid: 0
2015-05-21 15:14:56,579 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):Learner@366] - Getting a diff from the leader 0x0
2015-05-21 15:14:56,580 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Learner@366] - Getting a diff from the leader 0x0
2015-05-21 15:14:56,586 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):Learner@509] - Learner received NEWLEADER message
2015-05-21 15:14:56,586 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Learner@509] - Learner received NEWLEADER message
2015-05-21 15:14:56,598 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):FileTxnSnapLog@298] - Snapshotting: 0x0 to /home/mitake/github/zookeeper.git/build/test/tmp/test5063763051698974911.junit.dir/data/version-2/snapshot.0
2015-05-21 15:14:56,610 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):FileTxnSnapLog@298] - Snapshotting: 0x0 to /home/mitake/github/zookeeper.git/build/test/tmp/test967699041678849627.junit.dir/data/version-2/snapshot.0
2015-05-21 15:14:56,622 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):Leader@1243] - Have quorum of supporters, sids: [ [1, 2],[1, 2] ]; starting up and setting last processed zxid: 0x100000000
2015-05-21 15:14:56,653 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):CommitProcessor@252] - Configuring CommitProcessor with 12 worker threads.
2015-05-21 15:14:56,659 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Learner@493] - Learner received UPTODATE message
2015-05-21 15:14:56,659 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):Learner@493] - Learner received UPTODATE message
2015-05-21 15:14:56,675 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11222
2015-05-21 15:14:56,676 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):CommitProcessor@252] - Configuring CommitProcessor with 12 worker threads.
2015-05-21 15:14:56,676 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):CommitProcessor@252] - Configuring CommitProcessor with 12 worker threads.
2015-05-21 15:14:56,676 [myid:0] - INFO  [NIOServerCxnFactory.AcceptThread:0.0.0.0/0.0.0.0:11222:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:39326
2015-05-21 15:14:56,677 [myid:0] - INFO  [NIOWorkerThread-2:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:39326
2015-05-21 15:14:56,679 [myid:0] - INFO  [NIOWorkerThread-2:NIOServerCnxn$StatCommand@685] - Stat command output
2015-05-21 15:14:56,680 [myid:0] - INFO  [NIOWorkerThread-2:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:39326 (no session established for client)
2015-05-21 15:14:56,686 [myid:] - INFO  [main:Environment@109] - Client environment:zookeeper.version=3.6.0-SNAPSHOT--1, built on 04/16/2015 06:13 GMT
2015-05-21 15:14:56,687 [myid:] - INFO  [main:Environment@109] - Client environment:host.name=mitake-jiseki-PC
2015-05-21 15:14:56,687 [myid:] - INFO  [main:Environment@109] - Client environment:java.version=1.7.0_75
2015-05-21 15:14:56,687 [myid:] - INFO  [main:Environment@109] - Client environment:java.vendor=Oracle Corporation
2015-05-21 15:14:56,687 [myid:] - INFO  [main:Environment@109] - Client environment:java.home=/usr/lib/jvm/java-7-openjdk-amd64/jre
2015-05-21 15:14:56,687 [myid:] - INFO  [main:Environment@109] - Client environment:java.class.path=/home/mitake/github/zookeeper.git/build/test/classes:/home/mitake/github/zookeeper.git/build/test/lib/antlr-2.7.6.jar:/home/mitake/github/zookeeper.git/build/test/lib/checkstyle-5.0.jar:/home/mitake/github/zookeeper.git/build/test/lib/commons-beanutils-core-1.7.0.jar:/home/mitake/github/zookeeper.git/build/test/lib/commons-cli-1.0.jar:/home/mitake/github/zookeeper.git/build/test/lib/commons-collections-2.0.jar:/home/mitake/github/zookeeper.git/build/test/lib/commons-lang-1.0.jar:/home/mitake/github/zookeeper.git/build/test/lib/commons-logging-1.0.3.jar:/home/mitake/github/zookeeper.git/build/test/lib/google-collections-0.9.jar:/home/mitake/github/zookeeper.git/build/test/lib/hamcrest-core-1.1.jar:/home/mitake/github/zookeeper.git/build/test/lib/junit-4.9.jar:/home/mitake/github/zookeeper.git/build/test/lib/mockito-all-1.8.2.jar:/home/mitake/github/zookeeper.git/build/classes:/home/mitake/github/zookeeper.git/src/java/lib/aspectjrt.jar:/home/mitake/github/zookeeper.git/src/java/lib/aspectjtools.jar:/home/mitake/github/zookeeper.git/src/java/lib/aspectjweaver.jar:/home/mitake/github/zookeeper.git/src/java/lib/ivy-2.2.0.jar:/home/mitake/github/zookeeper.git/src/java/lib/org.aspectj.matcher.jar:/home/mitake/github/zookeeper.git/src/java/lib/protobuf-java-2.6.1.jar:/usr/share/ant/lib/ant.jar:/home/mitake/github/zookeeper.git/build/lib/commons-cli-1.2.jar:/home/mitake/github/zookeeper.git/build/lib/jackson-core-asl-1.9.11.jar:/home/mitake/github/zookeeper.git/build/lib/jackson-mapper-asl-1.9.11.jar:/home/mitake/github/zookeeper.git/build/lib/javacc.jar:/home/mitake/github/zookeeper.git/build/lib/jetty-6.1.26.jar:/home/mitake/github/zookeeper.git/build/lib/jetty-util-6.1.26.jar:/home/mitake/github/zookeeper.git/build/lib/jline-2.11.jar:/home/mitake/github/zookeeper.git/build/lib/log4j-1.2.16.jar:/home/mitake/github/zookeeper.git/build/lib/netty-3.7.0.Final.jar:/home/mitake/github/zookeeper.git/build/lib/servlet-api-2.5-20081211.jar:/home/mitake/github/zookeeper.git/build/lib/slf4j-api-1.7.5.jar:/home/mitake/github/zookeeper.git/build/lib/slf4j-log4j12-1.7.5.jar:/usr/share/ant/lib/junit.jar:/usr/share/java/ant-launcher-1.9.3.jar:/usr/share/ant/lib/ant-junit.jar:/usr/share/ant/lib/ant-junit4.jar
2015-05-21 15:14:56,688 [myid:] - INFO  [main:Environment@109] - Client environment:java.library.path=/usr/java/packages/lib/amd64:/usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib
2015-05-21 15:14:56,688 [myid:] - INFO  [main:Environment@109] - Client environment:java.io.tmpdir=/tmp
2015-05-21 15:14:56,688 [myid:] - INFO  [main:Environment@109] - Client environment:java.compiler=<NA>
2015-05-21 15:14:56,688 [myid:] - INFO  [main:Environment@109] - Client environment:os.name=Linux
2015-05-21 15:14:56,689 [myid:] - INFO  [main:Environment@109] - Client environment:os.arch=amd64
2015-05-21 15:14:56,689 [myid:] - INFO  [main:Environment@109] - Client environment:os.version=3.13.0-45-generic
2015-05-21 15:14:56,689 [myid:] - INFO  [main:Environment@109] - Client environment:user.name=mitake
2015-05-21 15:14:56,689 [myid:] - INFO  [main:Environment@109] - Client environment:user.home=/home/mitake
2015-05-21 15:14:56,689 [myid:] - INFO  [main:Environment@109] - Client environment:user.dir=/home/mitake/github/zookeeper.git/build/test
2015-05-21 15:14:56,690 [myid:] - INFO  [main:Environment@109] - Client environment:os.memory.free=377MB
2015-05-21 15:14:56,690 [myid:] - INFO  [main:Environment@109] - Client environment:os.memory.max=491MB
2015-05-21 15:14:56,690 [myid:] - INFO  [main:Environment@109] - Client environment:os.memory.total=491MB
2015-05-21 15:14:56,692 [myid:] - INFO  [main:ZooKeeper@717] - Initiating client connection, connectString=127.0.0.1:11222 sessionTimeout=30000 watcher=org.apache.zookeeper.server.quorum.ReconfigLegacyTest@712c662b
2015-05-21 15:14:56,699 [myid:] - INFO  [main-SendThread(127.0.0.1:11222):ClientCnxn$SendThread@1096] - Opening socket connection to server 127.0.0.1/127.0.0.1:11222. Will not attempt to authenticate using SASL (unknown error)
2015-05-21 15:14:56,699 [myid:0] - INFO  [NIOServerCxnFactory.AcceptThread:0.0.0.0/0.0.0.0:11222:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:39327
2015-05-21 15:14:56,699 [myid:] - INFO  [main-SendThread(127.0.0.1:11222):ClientCnxn$SendThread@968] - Socket connection established, initiating session, client: /127.0.0.1:39327, server: 127.0.0.1/127.0.0.1:11222
2015-05-21 15:14:56,701 [myid:0] - INFO  [NIOWorkerThread-3:ZooKeeperServer@931] - Client attempting to establish new session at /127.0.0.1:39327
2015-05-21 15:14:56,703 [myid:1] - WARN  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):Follower@122] - Got zxid 0x100000001 expected 0x1
2015-05-21 15:14:56,703 [myid:2] - INFO  [SyncThread:2:FileTxnLog@200] - Creating new log file: log.100000001
2015-05-21 15:14:56,703 [myid:0] - WARN  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):Follower@122] - Got zxid 0x100000001 expected 0x1
2015-05-21 15:14:56,704 [myid:1] - INFO  [SyncThread:1:FileTxnLog@200] - Creating new log file: log.100000001
2015-05-21 15:14:56,728 [myid:0] - INFO  [SyncThread:0:FileTxnLog@200] - Creating new log file: log.100000001
2015-05-21 15:14:56,743 [myid:0] - INFO  [CommitProcWorkThread-5:ZooKeeperServer@645] - Established session 0x627d76b0000 with negotiated timeout 30000 for client /127.0.0.1:39327
2015-05-21 15:14:56,744 [myid:] - INFO  [main-SendThread(127.0.0.1:11222):ClientCnxn$SendThread@1357] - Session establishment complete on server 127.0.0.1/127.0.0.1:11222, sessionid = 0x627d76b0000, negotiated timeout = 30000
2015-05-21 15:14:56,747 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11225
2015-05-21 15:14:56,747 [myid:1] - INFO  [NIOServerCxnFactory.AcceptThread:0.0.0.0/0.0.0.0:11225:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:35293
2015-05-21 15:14:56,748 [myid:1] - INFO  [NIOWorkerThread-1:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:35293
2015-05-21 15:14:56,748 [myid:1] - INFO  [NIOWorkerThread-1:NIOServerCnxn$StatCommand@685] - Stat command output
2015-05-21 15:14:56,748 [myid:1] - INFO  [NIOWorkerThread-1:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:35293 (no session established for client)
2015-05-21 15:14:56,748 [myid:] - INFO  [main:ZooKeeper@717] - Initiating client connection, connectString=127.0.0.1:11225 sessionTimeout=30000 watcher=org.apache.zookeeper.server.quorum.ReconfigLegacyTest@712c662b
2015-05-21 15:14:56,749 [myid:] - INFO  [main-SendThread(127.0.0.1:11225):ClientCnxn$SendThread@1096] - Opening socket connection to server 127.0.0.1/127.0.0.1:11225. Will not attempt to authenticate using SASL (unknown error)
2015-05-21 15:14:56,749 [myid:1] - INFO  [NIOServerCxnFactory.AcceptThread:0.0.0.0/0.0.0.0:11225:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:35294
2015-05-21 15:14:56,749 [myid:] - INFO  [main-SendThread(127.0.0.1:11225):ClientCnxn$SendThread@968] - Socket connection established, initiating session, client: /127.0.0.1:35294, server: 127.0.0.1/127.0.0.1:11225
2015-05-21 15:14:56,750 [myid:1] - INFO  [NIOWorkerThread-2:ZooKeeperServer@931] - Client attempting to establish new session at /127.0.0.1:35294
2015-05-21 15:14:56,764 [myid:1] - INFO  [CommitProcWorkThread-9:ZooKeeperServer@645] - Established session 0x1000627d76b0000 with negotiated timeout 30000 for client /127.0.0.1:35294
2015-05-21 15:14:56,764 [myid:] - INFO  [main-SendThread(127.0.0.1:11225):ClientCnxn$SendThread@1357] - Session establishment complete on server 127.0.0.1/127.0.0.1:11225, sessionid = 0x1000627d76b0000, negotiated timeout = 30000
2015-05-21 15:14:56,765 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11228
2015-05-21 15:14:56,766 [myid:2] - INFO  [NIOServerCxnFactory.AcceptThread:0.0.0.0/0.0.0.0:11228:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:39248
2015-05-21 15:14:56,766 [myid:2] - INFO  [NIOWorkerThread-1:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:39248
2015-05-21 15:14:56,766 [myid:2] - INFO  [NIOWorkerThread-1:NIOServerCnxn$StatCommand@685] - Stat command output
2015-05-21 15:14:56,766 [myid:2] - INFO  [NIOWorkerThread-1:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:39248 (no session established for client)
2015-05-21 15:14:56,767 [myid:] - INFO  [main:ZooKeeper@717] - Initiating client connection, connectString=127.0.0.1:11228 sessionTimeout=30000 watcher=org.apache.zookeeper.server.quorum.ReconfigLegacyTest@712c662b
2015-05-21 15:14:56,767 [myid:] - INFO  [main-SendThread(127.0.0.1:11228):ClientCnxn$SendThread@1096] - Opening socket connection to server 127.0.0.1/127.0.0.1:11228. Will not attempt to authenticate using SASL (unknown error)
2015-05-21 15:14:56,767 [myid:2] - INFO  [NIOServerCxnFactory.AcceptThread:0.0.0.0/0.0.0.0:11228:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:39249
2015-05-21 15:14:56,767 [myid:] - INFO  [main-SendThread(127.0.0.1:11228):ClientCnxn$SendThread@968] - Socket connection established, initiating session, client: /127.0.0.1:39249, server: 127.0.0.1/127.0.0.1:11228
2015-05-21 15:14:56,769 [myid:2] - INFO  [NIOWorkerThread-2:ZooKeeperServer@931] - Client attempting to establish new session at /127.0.0.1:39249
2015-05-21 15:14:56,781 [myid:2] - INFO  [CommitProcWorkThread-1:ZooKeeperServer@645] - Established session 0x2000627d7aa0000 with negotiated timeout 30000 for client /127.0.0.1:39249
2015-05-21 15:14:56,781 [myid:] - INFO  [main-SendThread(127.0.0.1:11228):ClientCnxn$SendThread@1357] - Session establishment complete on server 127.0.0.1/127.0.0.1:11228, sessionid = 0x2000627d7aa0000, negotiated timeout = 30000
2015-05-21 15:14:56,815 [myid:2] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@532] - Non-incremental reconfig
2015-05-21 15:14:56,868 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:41899:QuorumPeer@1271] - Restarting Leader Election
2015-05-21 15:14:56,868 [myid:2] - INFO  [localhost/127.0.0.1:11230:QuorumCnxManager$Listener@578] - Leaving listener
2015-05-21 15:14:56,869 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:14:56,869 [myid:2] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@550] - My election bind port: localhost/127.0.0.1:11230
2015-05-21 15:14:56,869 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@836] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(SocketInputStream.java:152)
	at java.net.SocketInputStream.read(SocketInputStream.java:122)
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:14:56,869 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@836] - Connection broken for id 0, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(SocketInputStream.java:152)
	at java.net.SocketInputStream.read(SocketInputStream.java:122)
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:14:56,870 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:14:56,869 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@836] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:14:56,870 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:14:56,869 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@836] - Connection broken for id 2, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:14:56,869 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:14:56,870 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:14:56,870 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:14:56,869 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:14:56,869 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 0 my id = 2
2015-05-21 15:14:56,870 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 2 my id = 1
2015-05-21 15:14:56,870 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:14:56,871 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 2 my id = 0
2015-05-21 15:14:56,870 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 1 my id = 2
2015-05-21 15:14:56,896 [myid:1] - WARN  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):QuorumPeer@1271] - Restarting Leader Election
2015-05-21 15:14:56,896 [myid:1] - INFO  [localhost/127.0.0.1:11227:QuorumCnxManager$Listener@578] - Leaving listener
2015-05-21 15:14:56,896 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:14:56,896 [myid:1] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@550] - My election bind port: localhost/127.0.0.1:11227
2015-05-21 15:14:56,896 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@836] - Connection broken for id 0, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(SocketInputStream.java:152)
	at java.net.SocketInputStream.read(SocketInputStream.java:122)
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:14:56,897 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:14:56,896 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@836] - Connection broken for id 1, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:14:56,897 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 0 my id = 1
2015-05-21 15:14:56,897 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:14:56,897 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:14:56,898 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 1 my id = 0
2015-05-21 15:14:56,900 [myid:2] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@849] - Got user-level KeeperException when processing sessionid:0x627d76b0000 type:create cxid:0x5 zxid:0x100000007 txntype:-1 reqpath:n/a Error Path:/test Error:KeeperErrorCode = NodeExists for /test
2015-05-21 15:14:56,903 [myid:0] - WARN  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):QuorumPeer@1271] - Restarting Leader Election
2015-05-21 15:14:56,903 [myid:0] - INFO  [localhost/127.0.0.1:11224:QuorumCnxManager$Listener@578] - Leaving listener
2015-05-21 15:14:56,904 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11222)(secure=disabled):NIOServerCnxnFactory@698] - binding to port /0.0.0.0:11221
2015-05-21 15:14:56,904 [myid:0] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@550] - My election bind port: localhost/127.0.0.1:11224
2015-05-21 15:14:56,904 [myid:0] - INFO  [NIOServerCxnFactory.AcceptThread:0.0.0.0/0.0.0.0:11222:NIOServerCnxnFactory$AcceptThread@219] - accept thread exitted run method
2015-05-21 15:14:57,937 [myid:] - INFO  [main:QuorumBase@394] - Shutting down quorum peer QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11221)(secure=disabled)
2015-05-21 15:14:57,937 [myid:] - INFO  [main:Follower@198] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:198)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1038)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:395)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:252)
	at org.apache.zookeeper.server.quorum.ReconfigLegacyTest.testReconfigRemoveClientFromStatic(ReconfigLegacyTest.java:222)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:52)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:69)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:532)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1165)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1016)
2015-05-21 15:14:57,939 [myid:] - INFO  [main:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.0,name2=Follower,name3=Connections,name4=127.0.0.1,name5=0x627d76b0000]
2015-05-21 15:14:57,939 [myid:] - INFO  [main:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:39327 which had sessionid 0x627d76b0000
2015-05-21 15:14:57,940 [myid:] - INFO  [main:LearnerZooKeeperServer@165] - Shutting down
2015-05-21 15:14:57,940 [myid:] - INFO  [main-SendThread(127.0.0.1:11222):ClientCnxn$SendThread@1211] - Unable to read additional data from server sessionid 0x627d76b0000, likely server has closed socket, closing socket connection and attempting reconnect
2015-05-21 15:14:57,940 [myid:] - INFO  [main:ZooKeeperServer@465] - shutting down
2015-05-21 15:14:57,940 [myid:] - INFO  [main:FollowerRequestProcessor@136] - Shutting down
2015-05-21 15:14:57,940 [myid:] - INFO  [main:CommitProcessor@356] - Shutting down
2015-05-21 15:14:57,940 [myid:0] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@107] - FollowerRequestProcessor exited loop!
2015-05-21 15:14:57,941 [myid:0] - INFO  [CommitProcessor:0:CommitProcessor@191] - CommitProcessor exited loop!
2015-05-21 15:14:57,941 [myid:] - INFO  [main:FinalRequestProcessor@489] - shutdown of request processor complete
2015-05-21 15:14:57,941 [myid:] - INFO  [main:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.0,name2=Follower,name3=InMemoryDataTree]
2015-05-21 15:14:57,942 [myid:] - INFO  [main:SyncRequestProcessor@191] - Shutting down
2015-05-21 15:14:57,942 [myid:0] - INFO  [SyncThread:0:SyncRequestProcessor@169] - SyncRequestProcessor exited!
2015-05-21 15:14:57,942 [myid:0] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@583] - ConnnectionExpirerThread interrupted
2015-05-21 15:14:57,943 [myid:0] - INFO  [NIOServerCxnFactory.SelectorThread-1:NIOServerCnxnFactory$SelectorThread@420] - selector thread exitted run method
2015-05-21 15:14:57,943 [myid:0] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@420] - selector thread exitted run method
2015-05-21 15:14:57,943 [myid:0] - INFO  [NIOServerCxnFactory.AcceptThread:/0.0.0.0:11221:NIOServerCnxnFactory$AcceptThread@219] - accept thread exitted run method
2015-05-21 15:14:57,944 [myid:0] - INFO  [localhost/127.0.0.1:11224:QuorumCnxManager$Listener@578] - Leaving listener
2015-05-21 15:14:57,944 [myid:] - INFO  [main:QuorumBase@398] - Shutting down leader election QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11221)(secure=disabled)
2015-05-21 15:14:57,944 [myid:] - INFO  [main:QuorumBase@403] - Waiting for QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11221)(secure=disabled) to exit thread
2015-05-21 15:14:58,660 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11221)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.0,name2=Follower]
2015-05-21 15:14:58,661 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11221)(secure=disabled):Follower@198] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:198)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:969)
2015-05-21 15:14:58,661 [myid:0] - WARN  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11221)(secure=disabled):QuorumPeer@1012] - PeerState set to LOOKING
2015-05-21 15:14:58,661 [myid:0] - WARN  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11221)(secure=disabled):QuorumPeer@994] - QuorumPeer main thread exited
2015-05-21 15:14:58,661 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11221)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0]
2015-05-21 15:14:58,662 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11221)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.0]
2015-05-21 15:14:58,662 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11221)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.1]
2015-05-21 15:14:58,662 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/0:0:0:0:0:0:0:0:11221)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.2]
2015-05-21 15:14:59,321 [myid:2] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@465] - WorkerSender is down
2015-05-21 15:14:59,322 [myid:0] - INFO  [WorkerSender[myid=0]:FastLeaderElection$Messenger$WorkerSender@465] - WorkerSender is down
2015-05-21 15:14:59,322 [myid:1] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@465] - WorkerSender is down
2015-05-21 15:14:59,323 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@435] - WorkerReceiver is down
2015-05-21 15:14:59,323 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@435] - WorkerReceiver is down
2015-05-21 15:14:59,323 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@435] - WorkerReceiver is down
2015-05-21 15:14:59,655 [myid:] - INFO  [main-SendThread(127.0.0.1:11222):ClientCnxn$SendThread@1096] - Opening socket connection to server 127.0.0.1/127.0.0.1:11222. Will not attempt to authenticate using SASL (unknown error)
2015-05-21 15:14:59,757 [myid:] - INFO  [main:ZooKeeper@1111] - Session: 0x627d76b0000 closed
2015-05-21 15:14:59,757 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@531] - EventThread shut down
2015-05-21 15:14:59,758 [myid:] - INFO  [main:QuorumBase@394] - Shutting down quorum peer QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled)
2015-05-21 15:14:59,758 [myid:] - INFO  [main:Follower@198] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:198)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1038)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:395)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:252)
	at org.apache.zookeeper.server.quorum.ReconfigLegacyTest.testReconfigRemoveClientFromStatic(ReconfigLegacyTest.java:222)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:52)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:69)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:532)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1165)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1016)
2015-05-21 15:14:59,760 [myid:] - INFO  [main:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=Connections,name4=127.0.0.1,name5=0x1000627d76b0000]
2015-05-21 15:14:59,760 [myid:] - INFO  [main:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:35294 which had sessionid 0x1000627d76b0000
2015-05-21 15:14:59,761 [myid:] - INFO  [main:LearnerZooKeeperServer@165] - Shutting down
2015-05-21 15:14:59,761 [myid:] - INFO  [main-SendThread(127.0.0.1:11225):ClientCnxn$SendThread@1211] - Unable to read additional data from server sessionid 0x1000627d76b0000, likely server has closed socket, closing socket connection and attempting reconnect
2015-05-21 15:14:59,761 [myid:] - INFO  [main:ZooKeeperServer@465] - shutting down
2015-05-21 15:14:59,761 [myid:] - INFO  [main:FollowerRequestProcessor@136] - Shutting down
2015-05-21 15:14:59,762 [myid:] - INFO  [main:CommitProcessor@356] - Shutting down
2015-05-21 15:14:59,762 [myid:1] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@107] - FollowerRequestProcessor exited loop!
2015-05-21 15:14:59,762 [myid:1] - INFO  [CommitProcessor:1:CommitProcessor@191] - CommitProcessor exited loop!
2015-05-21 15:14:59,762 [myid:] - INFO  [main:FinalRequestProcessor@489] - shutdown of request processor complete
2015-05-21 15:14:59,763 [myid:] - INFO  [main:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree]
2015-05-21 15:14:59,763 [myid:] - INFO  [main:SyncRequestProcessor@191] - Shutting down
2015-05-21 15:14:59,763 [myid:1] - INFO  [SyncThread:1:SyncRequestProcessor@169] - SyncRequestProcessor exited!
2015-05-21 15:14:59,764 [myid:1] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@583] - ConnnectionExpirerThread interrupted
2015-05-21 15:14:59,764 [myid:1] - INFO  [NIOServerCxnFactory.SelectorThread-1:NIOServerCnxnFactory$SelectorThread@420] - selector thread exitted run method
2015-05-21 15:14:59,764 [myid:1] - INFO  [NIOServerCxnFactory.AcceptThread:0.0.0.0/0.0.0.0:11225:NIOServerCnxnFactory$AcceptThread@219] - accept thread exitted run method
2015-05-21 15:14:59,764 [myid:1] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@420] - selector thread exitted run method
2015-05-21 15:14:59,764 [myid:1] - INFO  [localhost/127.0.0.1:11227:QuorumCnxManager$Listener@578] - Leaving listener
2015-05-21 15:14:59,764 [myid:] - INFO  [main:QuorumBase@398] - Shutting down leader election QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled)
2015-05-21 15:14:59,764 [myid:] - INFO  [main:QuorumBase@403] - Waiting for QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled) to exit thread
2015-05-21 15:14:59,897 [myid:1] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@465] - WorkerSender is down
2015-05-21 15:14:59,897 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@435] - WorkerReceiver is down
2015-05-21 15:14:59,904 [myid:0] - INFO  [WorkerSender[myid=0]:FastLeaderElection$Messenger$WorkerSender@465] - WorkerSender is down
2015-05-21 15:14:59,904 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@435] - WorkerReceiver is down
2015-05-21 15:15:00,660 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower]
2015-05-21 15:15:00,660 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):Follower@198] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:198)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:969)
2015-05-21 15:15:00,661 [myid:1] - WARN  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):QuorumPeer@1012] - PeerState set to LOOKING
2015-05-21 15:15:00,661 [myid:1] - WARN  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):QuorumPeer@994] - QuorumPeer main thread exited
2015-05-21 15:15:00,661 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1]
2015-05-21 15:15:00,661 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1]
2015-05-21 15:15:00,662 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.0]
2015-05-21 15:15:00,662 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/0:0:0:0:0:0:0:0:11225)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2]
2015-05-21 15:15:00,918 [myid:] - INFO  [main-SendThread(127.0.0.1:11225):ClientCnxn$SendThread@1096] - Opening socket connection to server 127.0.0.1/127.0.0.1:11225. Will not attempt to authenticate using SASL (unknown error)
2015-05-21 15:15:01,019 [myid:] - INFO  [main:ZooKeeper@1111] - Session: 0x1000627d76b0000 closed
2015-05-21 15:15:01,019 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@531] - EventThread shut down
2015-05-21 15:15:01,019 [myid:] - INFO  [main:QuorumBase@394] - Shutting down quorum peer QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled)
2015-05-21 15:15:01,020 [myid:] - INFO  [main:Leader@611] - Shutting down
2015-05-21 15:15:01,020 [myid:] - INFO  [main:Leader@617] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:617)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1035)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:395)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:252)
	at org.apache.zookeeper.server.quorum.ReconfigLegacyTest.testReconfigRemoveClientFromStatic(ReconfigLegacyTest.java:222)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:52)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:69)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:532)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1165)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1016)
2015-05-21 15:15:01,022 [myid:2] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11229:Leader$LearnerCnxAcceptor@372] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2015-05-21 15:15:01,022 [myid:] - INFO  [main:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Leader,name3=Connections,name4=127.0.0.1,name5=0x2000627d7aa0000]
2015-05-21 15:15:01,022 [myid:] - INFO  [main:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:39249 which had sessionid 0x2000627d7aa0000
2015-05-21 15:15:01,023 [myid:] - INFO  [main:ZooKeeperServer@465] - shutting down
2015-05-21 15:15:01,023 [myid:] - INFO  [main-SendThread(127.0.0.1:11228):ClientCnxn$SendThread@1211] - Unable to read additional data from server sessionid 0x2000627d7aa0000, likely server has closed socket, closing socket connection and attempting reconnect
2015-05-21 15:15:01,023 [myid:] - INFO  [main:SessionTrackerImpl@232] - Shutting down
2015-05-21 15:15:01,023 [myid:] - INFO  [main:LeaderRequestProcessor@77] - Shutting down
2015-05-21 15:15:01,024 [myid:] - INFO  [main:PrepRequestProcessor@973] - Shutting down
2015-05-21 15:15:01,024 [myid:] - INFO  [main:ProposalRequestProcessor@88] - Shutting down
2015-05-21 15:15:01,024 [myid:2] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@155] - PrepRequestProcessor exited loop!
2015-05-21 15:15:01,024 [myid:] - INFO  [main:CommitProcessor@356] - Shutting down
2015-05-21 15:15:01,025 [myid:2] - INFO  [CommitProcessor:2:CommitProcessor@191] - CommitProcessor exited loop!
2015-05-21 15:15:01,026 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@912] - Shutting down
2015-05-21 15:15:01,026 [myid:] - INFO  [main:FinalRequestProcessor@489] - shutdown of request processor complete
2015-05-21 15:15:01,026 [myid:] - INFO  [main:SyncRequestProcessor@191] - Shutting down
2015-05-21 15:15:01,026 [myid:2] - INFO  [SyncThread:2:SyncRequestProcessor@169] - SyncRequestProcessor exited!
2015-05-21 15:15:01,027 [myid:] - INFO  [main:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Leader,name3=InMemoryDataTree]
2015-05-21 15:15:01,027 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:41900:LearnerHandler@595] - ******* GOODBYE /127.0.0.1:41900 ********
2015-05-21 15:15:01,027 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:41899:LearnerHandler@595] - ******* GOODBYE /127.0.0.1:41899 ********
2015-05-21 15:15:01,028 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:41900:LearnerHandler@879] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1219)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:340)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:338)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:877)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:598)
2015-05-21 15:15:01,028 [myid:2] - INFO  [NIOServerCxnFactory.SelectorThread-1:NIOServerCnxnFactory$SelectorThread@420] - selector thread exitted run method
2015-05-21 15:15:01,028 [myid:2] - INFO  [NIOServerCxnFactory.AcceptThread:0.0.0.0/0.0.0.0:11228:NIOServerCnxnFactory$AcceptThread@219] - accept thread exitted run method
2015-05-21 15:15:01,028 [myid:2] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@420] - selector thread exitted run method
2015-05-21 15:15:01,028 [myid:2] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@583] - ConnnectionExpirerThread interrupted
2015-05-21 15:15:01,028 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:41899:LearnerHandler@879] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1219)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:340)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:338)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:877)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:598)
2015-05-21 15:15:01,028 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Leader]
2015-05-21 15:15:01,028 [myid:2] - INFO  [localhost/127.0.0.1:11230:QuorumCnxManager$Listener@578] - Leaving listener
2015-05-21 15:15:01,028 [myid:2] - WARN  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):QuorumPeer@981] - Unexpected exception
java.lang.InterruptedException
	at java.lang.Object.wait(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:557)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:978)
2015-05-21 15:15:01,029 [myid:] - INFO  [main:QuorumBase@398] - Shutting down leader election QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled)
2015-05-21 15:15:01,029 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):Leader@611] - Shutting down
2015-05-21 15:15:01,029 [myid:] - INFO  [main:QuorumBase@403] - Waiting for QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled) to exit thread
2015-05-21 15:15:01,029 [myid:2] - WARN  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):QuorumPeer@1012] - PeerState set to LOOKING
2015-05-21 15:15:01,029 [myid:2] - WARN  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):QuorumPeer@994] - QuorumPeer main thread exited
2015-05-21 15:15:01,029 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2]
2015-05-21 15:15:01,029 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2]
2015-05-21 15:15:01,029 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.0]
2015-05-21 15:15:01,029 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/0:0:0:0:0:0:0:0:11228)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1]
2015-05-21 15:15:01,123 [myid:] - INFO  [main:ZooKeeper@1111] - Session: 0x2000627d7aa0000 closed
2015-05-21 15:15:01,124 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@531] - EventThread shut down
2015-05-21 15:15:01,124 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@55] - Memory used 101352
2015-05-21 15:15:01,124 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@60] - Number of threads 8
2015-05-21 15:15:01,125 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@65] - FINISHED TEST METHOD testReconfigRemoveClientFromStatic
2015-05-21 15:15:01,125 [myid:] - INFO  [main:ZKTestCase$1@65] - SUCCEEDED testReconfigRemoveClientFromStatic
2015-05-21 15:15:01,125 [myid:] - INFO  [main:ZKTestCase$1@60] - FINISHED testReconfigRemoveClientFromStatic
2015-05-21 15:15:01,128 [myid:] - INFO  [main:ZKTestCase$1@55] - STARTING testConfigFileBackwardCompatibility
2015-05-21 15:15:01,128 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@50] - RUNNING TEST METHOD testConfigFileBackwardCompatibility
2015-05-21 15:15:01,128 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11231
2015-05-21 15:15:01,129 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11232
2015-05-21 15:15:01,129 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11233
2015-05-21 15:15:01,129 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11234
2015-05-21 15:15:01,129 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11235
2015-05-21 15:15:01,130 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11236
2015-05-21 15:15:01,130 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11237
2015-05-21 15:15:01,130 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11238
2015-05-21 15:15:01,130 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11239
2015-05-21 15:15:01,131 [myid:] - INFO  [main:QuorumPeerTestBase$MainThread@130] - id = 0 tmpDir = /home/mitake/github/zookeeper.git/build/test/tmp/test6513857175236309453.junit.dir clientPort = 11231 adminServerPort = 8080
2015-05-21 15:15:01,132 [myid:] - INFO  [Thread-6:QuorumPeerConfig@114] - Reading configuration from: /home/mitake/github/zookeeper.git/build/test/tmp/test6513857175236309453.junit.dir/zoo.cfg
2015-05-21 15:15:01,132 [myid:] - INFO  [main:QuorumPeerTestBase$MainThread@130] - id = 1 tmpDir = /home/mitake/github/zookeeper.git/build/test/tmp/test1587893320977124587.junit.dir clientPort = 11234 adminServerPort = 8080
2015-05-21 15:15:01,132 [myid:] - INFO  [Thread-6:QuorumPeerConfig@316] - clientPortAddress is 0.0.0.0/0.0.0.0:11231
2015-05-21 15:15:01,132 [myid:] - INFO  [Thread-6:QuorumPeerConfig@320] - secureClientPort is not set
2015-05-21 15:15:01,132 [myid:] - INFO  [Thread-7:QuorumPeerConfig@114] - Reading configuration from: /home/mitake/github/zookeeper.git/build/test/tmp/test1587893320977124587.junit.dir/zoo.cfg
2015-05-21 15:15:01,132 [myid:] - INFO  [main:QuorumPeerTestBase$MainThread@130] - id = 2 tmpDir = /home/mitake/github/zookeeper.git/build/test/tmp/test7398971180623681449.junit.dir clientPort = 11237 adminServerPort = 8080
2015-05-21 15:15:01,132 [myid:] - INFO  [Thread-7:QuorumPeerConfig@316] - clientPortAddress is 0.0.0.0/0.0.0.0:11234
2015-05-21 15:15:01,132 [myid:] - INFO  [Thread-7:QuorumPeerConfig@320] - secureClientPort is not set
2015-05-21 15:15:01,133 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11231
2015-05-21 15:15:01,133 [myid:] - INFO  [Thread-8:QuorumPeerConfig@114] - Reading configuration from: /home/mitake/github/zookeeper.git/build/test/tmp/test7398971180623681449.junit.dir/zoo.cfg
2015-05-21 15:15:01,133 [myid:] - INFO  [Thread-8:QuorumPeerConfig@316] - clientPortAddress is 0.0.0.0/0.0.0.0:11237
2015-05-21 15:15:01,133 [myid:] - INFO  [Thread-8:QuorumPeerConfig@320] - secureClientPort is not set
2015-05-21 15:15:01,133 [myid:] - INFO  [main:ClientBase@249] - server 127.0.0.1:11231 not up
java.net.ConnectException: Connection refused
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:579)
	at java.net.Socket.connect(Socket.java:528)
	at java.net.Socket.<init>(Socket.java:425)
	at java.net.Socket.<init>(Socket.java:208)
	at org.apache.zookeeper.client.FourLetterWordMain.send4LetterWord(FourLetterWordMain.java:74)
	at org.apache.zookeeper.test.ClientBase.waitForServerUp(ClientBase.java:242)
	at org.apache.zookeeper.test.ClientBase.waitForServerUp(ClientBase.java:233)
	at org.apache.zookeeper.server.quorum.ReconfigLegacyTest.testConfigFileBackwardCompatibility(ReconfigLegacyTest.java:84)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:52)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:69)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:532)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1165)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1016)
2015-05-21 15:15:01,141 [myid:0] - INFO  [Thread-6:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2015-05-21 15:15:01,141 [myid:0] - INFO  [Thread-6:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2015-05-21 15:15:01,142 [myid:0] - INFO  [Thread-6:DatadirCleanupManager@101] - Purge task is not scheduled.
2015-05-21 15:15:01,142 [myid:0] - WARN  [Thread-6:QuorumPeerMain@133] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:53)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:131)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:120)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:240)
	at java.lang.Thread.run(Thread.java:745)
2015-05-21 15:15:01,142 [myid:0] - INFO  [Thread-6:QuorumPeerMain@136] - Starting quorum peer
2015-05-21 15:15:01,142 [myid:0] - INFO  [Thread-6:NIOServerCnxnFactory@673] - Configuring NIO connection handler with 10s sessionless connection timeout, 2 selector thread(s), 24 worker threads, and 64 kB direct buffers.
2015-05-21 15:15:01,142 [myid:0] - INFO  [Thread-6:NIOServerCnxnFactory@686] - binding to port localhost/127.0.0.1:11231
2015-05-21 15:15:01,142 [myid:0] - INFO  [Thread-6:QuorumPeer@1181] - Local sessions disabled
2015-05-21 15:15:01,143 [myid:0] - INFO  [Thread-6:QuorumPeer@1192] - Local session upgrading disabled
2015-05-21 15:15:01,143 [myid:0] - INFO  [Thread-6:QuorumPeer@1159] - tickTime set to 4000
2015-05-21 15:15:01,143 [myid:0] - INFO  [Thread-6:QuorumPeer@1203] - minSessionTimeout set to 8000
2015-05-21 15:15:01,143 [myid:0] - INFO  [Thread-6:QuorumPeer@1214] - maxSessionTimeout set to 80000
2015-05-21 15:15:01,143 [myid:0] - INFO  [Thread-6:QuorumPeer@1229] - initLimit set to 10
2015-05-21 15:15:01,143 [myid:0] - INFO  [Thread-6:QuorumPeer@645] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2015-05-21 15:15:01,154 [myid:2] - INFO  [Thread-8:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2015-05-21 15:15:01,154 [myid:1] - INFO  [Thread-7:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2015-05-21 15:15:01,154 [myid:2] - INFO  [Thread-8:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2015-05-21 15:15:01,154 [myid:1] - INFO  [Thread-7:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2015-05-21 15:15:01,154 [myid:2] - INFO  [Thread-8:DatadirCleanupManager@101] - Purge task is not scheduled.
2015-05-21 15:15:01,154 [myid:1] - INFO  [Thread-7:DatadirCleanupManager@101] - Purge task is not scheduled.
2015-05-21 15:15:01,154 [myid:2] - WARN  [Thread-8:QuorumPeerMain@133] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:53)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:131)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:120)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:240)
	at java.lang.Thread.run(Thread.java:745)
2015-05-21 15:15:01,154 [myid:1] - WARN  [Thread-7:QuorumPeerMain@133] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:53)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:131)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:120)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:240)
	at java.lang.Thread.run(Thread.java:745)
2015-05-21 15:15:01,154 [myid:2] - INFO  [Thread-8:QuorumPeerMain@136] - Starting quorum peer
2015-05-21 15:15:01,154 [myid:1] - INFO  [Thread-7:QuorumPeerMain@136] - Starting quorum peer
2015-05-21 15:15:01,155 [myid:2] - INFO  [Thread-8:NIOServerCnxnFactory@673] - Configuring NIO connection handler with 10s sessionless connection timeout, 2 selector thread(s), 24 worker threads, and 64 kB direct buffers.
2015-05-21 15:15:01,155 [myid:1] - INFO  [Thread-7:NIOServerCnxnFactory@673] - Configuring NIO connection handler with 10s sessionless connection timeout, 2 selector thread(s), 24 worker threads, and 64 kB direct buffers.
2015-05-21 15:15:01,155 [myid:2] - INFO  [Thread-8:NIOServerCnxnFactory@686] - binding to port localhost/127.0.0.1:11237
2015-05-21 15:15:01,155 [myid:1] - INFO  [Thread-7:NIOServerCnxnFactory@686] - binding to port localhost/127.0.0.1:11234
2015-05-21 15:15:01,155 [myid:2] - INFO  [Thread-8:QuorumPeer@1181] - Local sessions disabled
2015-05-21 15:15:01,155 [myid:1] - INFO  [Thread-7:QuorumPeer@1181] - Local sessions disabled
2015-05-21 15:15:01,155 [myid:2] - INFO  [Thread-8:QuorumPeer@1192] - Local session upgrading disabled
2015-05-21 15:15:01,155 [myid:1] - INFO  [Thread-7:QuorumPeer@1192] - Local session upgrading disabled
2015-05-21 15:15:01,155 [myid:2] - INFO  [Thread-8:QuorumPeer@1159] - tickTime set to 4000
2015-05-21 15:15:01,155 [myid:1] - INFO  [Thread-7:QuorumPeer@1159] - tickTime set to 4000
2015-05-21 15:15:01,155 [myid:2] - INFO  [Thread-8:QuorumPeer@1203] - minSessionTimeout set to 8000
2015-05-21 15:15:01,155 [myid:1] - INFO  [Thread-7:QuorumPeer@1203] - minSessionTimeout set to 8000
2015-05-21 15:15:01,155 [myid:2] - INFO  [Thread-8:QuorumPeer@1214] - maxSessionTimeout set to 80000
2015-05-21 15:15:01,156 [myid:1] - INFO  [Thread-7:QuorumPeer@1214] - maxSessionTimeout set to 80000
2015-05-21 15:15:01,156 [myid:2] - INFO  [Thread-8:QuorumPeer@1229] - initLimit set to 10
2015-05-21 15:15:01,156 [myid:1] - INFO  [Thread-7:QuorumPeer@1229] - initLimit set to 10
2015-05-21 15:15:01,156 [myid:2] - INFO  [Thread-8:QuorumPeer@645] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2015-05-21 15:15:01,156 [myid:1] - INFO  [Thread-7:QuorumPeer@645] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2015-05-21 15:15:01,166 [myid:0] - INFO  [Thread-6:QuorumPeer@660] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2015-05-21 15:15:01,176 [myid:1] - INFO  [Thread-7:QuorumPeer@660] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2015-05-21 15:15:01,176 [myid:2] - INFO  [Thread-8:QuorumPeer@660] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2015-05-21 15:15:01,186 [myid:0] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@550] - My election bind port: localhost/127.0.0.1:11233
2015-05-21 15:15:01,187 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):QuorumPeer@887] - LOOKING
2015-05-21 15:15:01,187 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):FastLeaderElection@889] - New election. My id =  0, proposed zxid=0x0
2015-05-21 15:15:01,188 [myid:0] - WARN  [WorkerSender[myid=0]:QuorumCnxManager@384] - Cannot open channel to 1 at election address localhost/127.0.0.1:11236
java.net.ConnectException: Connection refused
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:579)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:369)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:407)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:346)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:481)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:460)
	at java.lang.Thread.run(Thread.java:745)
2015-05-21 15:15:01,188 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:15:01,188 [myid:0] - WARN  [WorkerSender[myid=0]:QuorumCnxManager@384] - Cannot open channel to 2 at election address localhost/127.0.0.1:11239
java.net.ConnectException: Connection refused
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:579)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:369)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:407)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:346)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:481)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:460)
	at java.lang.Thread.run(Thread.java:745)
2015-05-21 15:15:01,193 [myid:2] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@550] - My election bind port: localhost/127.0.0.1:11239
2015-05-21 15:15:01,193 [myid:1] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@550] - My election bind port: localhost/127.0.0.1:11236
2015-05-21 15:15:01,194 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):QuorumPeer@887] - LOOKING
2015-05-21 15:15:01,194 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):QuorumPeer@887] - LOOKING
2015-05-21 15:15:01,194 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):FastLeaderElection@889] - New election. My id =  2, proposed zxid=0x0
2015-05-21 15:15:01,194 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):FastLeaderElection@889] - New election. My id =  1, proposed zxid=0x0
2015-05-21 15:15:01,195 [myid:0] - INFO  [localhost/127.0.0.1:11233:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:55857
2015-05-21 15:15:01,195 [myid:1] - INFO  [localhost/127.0.0.1:11236:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:40052
2015-05-21 15:15:01,195 [myid:0] - INFO  [localhost/127.0.0.1:11233:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:55858
2015-05-21 15:15:01,196 [myid:2] - INFO  [localhost/127.0.0.1:11239:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:60147
2015-05-21 15:15:01,196 [myid:1] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@197] - Have smaller server identifier, so dropping the connection: (2, 1)
2015-05-21 15:15:01,196 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@683] - Notification: 2 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:15:01,197 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@758] - Exception when using channel: for id 2 my id = 1 error = java.net.SocketException: Connection reset
2015-05-21 15:15:01,197 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:15:01,197 [myid:1] - INFO  [localhost/127.0.0.1:11236:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:40054
2015-05-21 15:15:01,197 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@836] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(SocketInputStream.java:152)
	at java.net.SocketInputStream.read(SocketInputStream.java:122)
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.io.DataInputStream.readInt(DataInputStream.java:388)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:01,197 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:15:01,198 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:15:01,198 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:01,198 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:15:01,198 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:15:01,197 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 2 my id = 1
2015-05-21 15:15:01,197 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@836] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(SocketInputStream.java:196)
	at java.net.SocketInputStream.read(SocketInputStream.java:122)
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:01,199 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@683] - Notification: 2 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:15:01,199 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:15:01,198 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 1 my id = 2
2015-05-21 15:15:01,199 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:15:01,199 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:01,200 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:15:01,200 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:15:01,201 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:15:01,201 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:15:01,201 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:15:01,202 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:15:01,202 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:15:01,384 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11231
2015-05-21 15:15:01,384 [myid:0] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11231:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:56872
2015-05-21 15:15:01,386 [myid:0] - INFO  [NIOWorkerThread-1:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:56872
2015-05-21 15:15:01,386 [myid:0] - INFO  [NIOWorkerThread-1:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:56872 (no session established for client)
2015-05-21 15:15:01,402 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.0,name2=LeaderElection]
2015-05-21 15:15:01,402 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):QuorumPeer@963] - FOLLOWING
2015-05-21 15:15:01,402 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=LeaderElection]
2015-05-21 15:15:01,402 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=LeaderElection]
2015-05-21 15:15:01,402 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):ZooKeeperServer@825] - minSessionTimeout set to 8000
2015-05-21 15:15:01,403 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):QuorumPeer@963] - FOLLOWING
2015-05-21 15:15:01,403 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):QuorumPeer@975] - LEADING
2015-05-21 15:15:01,403 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):ZooKeeperServer@825] - minSessionTimeout set to 8000
2015-05-21 15:15:01,404 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):ZooKeeperServer@834] - maxSessionTimeout set to 80000
2015-05-21 15:15:01,403 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):ZooKeeperServer@834] - maxSessionTimeout set to 80000
2015-05-21 15:15:01,404 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):ZooKeeperServer@156] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /home/mitake/github/zookeeper.git/build/test/tmp/test1587893320977124587.junit.dir/data/version-2 snapdir /home/mitake/github/zookeeper.git/build/test/tmp/test1587893320977124587.junit.dir/data/version-2
2015-05-21 15:15:01,403 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):ZooKeeperServer@825] - minSessionTimeout set to 8000
2015-05-21 15:15:01,404 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):Follower@66] - FOLLOWING - LEADER ELECTION TOOK - 2
2015-05-21 15:15:01,404 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):ZooKeeperServer@156] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /home/mitake/github/zookeeper.git/build/test/tmp/test6513857175236309453.junit.dir/data/version-2 snapdir /home/mitake/github/zookeeper.git/build/test/tmp/test6513857175236309453.junit.dir/data/version-2
2015-05-21 15:15:01,404 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):ZooKeeperServer@834] - maxSessionTimeout set to 80000
2015-05-21 15:15:01,405 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):Follower@66] - FOLLOWING - LEADER ELECTION TOOK - 2
2015-05-21 15:15:01,405 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):ZooKeeperServer@156] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /home/mitake/github/zookeeper.git/build/test/tmp/test7398971180623681449.junit.dir/data/version-2 snapdir /home/mitake/github/zookeeper.git/build/test/tmp/test7398971180623681449.junit.dir/data/version-2
2015-05-21 15:15:01,405 [myid:1] - WARN  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):Learner@273] - Unexpected exception, tries=0, remaining init limit=40000, connecting to localhost/127.0.0.1:11238
java.net.ConnectException: Connection refused
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:579)
	at org.apache.zookeeper.server.quorum.Learner.sockConnect(Learner.java:227)
	at org.apache.zookeeper.server.quorum.Learner.connectToLeader(Learner.java:256)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:74)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:965)
2015-05-21 15:15:01,405 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):Leader@410] - LEADING - LEADER ELECTION TOOK - 3
2015-05-21 15:15:01,407 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):FileTxnSnapLog@298] - Snapshotting: 0x0 to /home/mitake/github/zookeeper.git/build/test/tmp/test7398971180623681449.junit.dir/data/version-2/snapshot.0
2015-05-21 15:15:01,409 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:36904:LearnerHandler@361] - Follower sid: 0 : info : localhost:11232:11233:participant;localhost:11231
2015-05-21 15:15:01,433 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:36904:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x0 peerLastZxid=0x0
2015-05-21 15:15:01,433 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:36904:LearnerHandler@703] - Sending DIFF zxid=0x0 for peer sid: 0
2015-05-21 15:15:01,434 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):Learner@366] - Getting a diff from the leader 0x0
2015-05-21 15:15:01,435 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):Learner@509] - Learner received NEWLEADER message
2015-05-21 15:15:01,457 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):FileTxnSnapLog@298] - Snapshotting: 0x0 to /home/mitake/github/zookeeper.git/build/test/tmp/test6513857175236309453.junit.dir/data/version-2/snapshot.0
2015-05-21 15:15:01,470 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):Leader@1243] - Have quorum of supporters, sids: [ [0, 2],[0, 2] ]; starting up and setting last processed zxid: 0x100000000
2015-05-21 15:15:01,490 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):CommitProcessor@252] - Configuring CommitProcessor with 12 worker threads.
2015-05-21 15:15:01,491 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):Learner@493] - Learner received UPTODATE message
2015-05-21 15:15:01,508 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):CommitProcessor@252] - Configuring CommitProcessor with 12 worker threads.
2015-05-21 15:15:01,637 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11231
2015-05-21 15:15:01,637 [myid:0] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11231:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:56875
2015-05-21 15:15:01,639 [myid:0] - INFO  [NIOWorkerThread-2:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:56875
2015-05-21 15:15:01,640 [myid:0] - INFO  [NIOWorkerThread-2:NIOServerCnxn$StatCommand@685] - Stat command output
2015-05-21 15:15:01,640 [myid:0] - INFO  [NIOWorkerThread-2:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:56875 (no session established for client)
2015-05-21 15:15:01,641 [myid:] - INFO  [main:ZooKeeper@717] - Initiating client connection, connectString=127.0.0.1:11231 sessionTimeout=30000 watcher=org.apache.zookeeper.server.quorum.ReconfigLegacyTest@327a051d
2015-05-21 15:15:01,642 [myid:] - INFO  [main-SendThread(127.0.0.1:11231):ClientCnxn$SendThread@1096] - Opening socket connection to server 127.0.0.1/127.0.0.1:11231. Will not attempt to authenticate using SASL (unknown error)
2015-05-21 15:15:01,642 [myid:] - INFO  [main-SendThread(127.0.0.1:11231):ClientCnxn$SendThread@968] - Socket connection established, initiating session, client: /127.0.0.1:56876, server: 127.0.0.1/127.0.0.1:11231
2015-05-21 15:15:01,642 [myid:0] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11231:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:56876
2015-05-21 15:15:01,645 [myid:0] - INFO  [NIOWorkerThread-3:ZooKeeperServer@931] - Client attempting to establish new session at /127.0.0.1:56876
2015-05-21 15:15:01,647 [myid:2] - INFO  [SyncThread:2:FileTxnLog@200] - Creating new log file: log.100000001
2015-05-21 15:15:01,647 [myid:0] - WARN  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):Follower@122] - Got zxid 0x100000001 expected 0x1
2015-05-21 15:15:01,648 [myid:0] - INFO  [SyncThread:0:FileTxnLog@200] - Creating new log file: log.100000001
2015-05-21 15:15:01,670 [myid:0] - INFO  [CommitProcWorkThread-5:ZooKeeperServer@645] - Established session 0x627ea5b0000 with negotiated timeout 30000 for client /127.0.0.1:56876
2015-05-21 15:15:01,671 [myid:] - INFO  [main-SendThread(127.0.0.1:11231):ClientCnxn$SendThread@1357] - Session establishment complete on server 127.0.0.1/127.0.0.1:11231, sessionid = 0x627ea5b0000, negotiated timeout = 30000
2015-05-21 15:15:01,675 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11234
2015-05-21 15:15:01,676 [myid:1] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11234:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:53523
2015-05-21 15:15:01,677 [myid:1] - INFO  [NIOWorkerThread-1:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:53523
2015-05-21 15:15:01,677 [myid:1] - INFO  [NIOWorkerThread-1:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:53523 (no session established for client)
2015-05-21 15:15:01,928 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11234
2015-05-21 15:15:01,928 [myid:1] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11234:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:53524
2015-05-21 15:15:01,929 [myid:1] - INFO  [NIOWorkerThread-2:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:53524
2015-05-21 15:15:01,930 [myid:1] - INFO  [NIOWorkerThread-2:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:53524 (no session established for client)
2015-05-21 15:15:02,181 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11234
2015-05-21 15:15:02,181 [myid:1] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11234:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:53525
2015-05-21 15:15:02,183 [myid:1] - INFO  [NIOWorkerThread-3:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:53525
2015-05-21 15:15:02,183 [myid:1] - INFO  [NIOWorkerThread-3:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:53525 (no session established for client)
2015-05-21 15:15:02,240 [myid:2] - INFO  [SessionTracker:SessionTrackerImpl@158] - SessionTrackerImpl exited loop!
2015-05-21 15:15:02,407 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:36910:LearnerHandler@361] - Follower sid: 1 : info : localhost:11235:11236:participant;localhost:11234
2015-05-21 15:15:02,426 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:36910:LearnerHandler@659] - Synchronizing with Follower sid: 1 maxCommittedLog=0x100000001 minCommittedLog=0x100000001 lastProcessedZxid=0x100000001 peerLastZxid=0x0
2015-05-21 15:15:02,429 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:36910:ZKDatabase@310] - Unable to find proposals from txnlog for zxid: 0
2015-05-21 15:15:02,430 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:36910:LearnerHandler@434] - Sending snapshot last zxid of peer is 0x0, zxid of leader is 0x100000001, send zxid of db as 0x100000001, 1 concurrent snapshots, snapshot was exempt from throttle
2015-05-21 15:15:02,430 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):Learner@369] - Getting a snapshot from leader
2015-05-21 15:15:02,433 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):Learner@509] - Learner received NEWLEADER message
2015-05-21 15:15:02,433 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11234
2015-05-21 15:15:02,434 [myid:1] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11234:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:53527
2015-05-21 15:15:02,435 [myid:1] - INFO  [NIOWorkerThread-4:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:53527
2015-05-21 15:15:02,436 [myid:1] - INFO  [NIOWorkerThread-4:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:53527 (no session established for client)
2015-05-21 15:15:02,446 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):FileTxnSnapLog@298] - Snapshotting: 0x100000001 to /home/mitake/github/zookeeper.git/build/test/tmp/test1587893320977124587.junit.dir/data/version-2/snapshot.100000001
2015-05-21 15:15:02,455 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):Learner@493] - Learner received UPTODATE message
2015-05-21 15:15:02,473 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):CommitProcessor@252] - Configuring CommitProcessor with 12 worker threads.
2015-05-21 15:15:02,686 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11234
2015-05-21 15:15:02,687 [myid:1] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11234:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:53528
2015-05-21 15:15:02,688 [myid:1] - INFO  [NIOWorkerThread-5:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:53528
2015-05-21 15:15:02,688 [myid:1] - INFO  [NIOWorkerThread-5:NIOServerCnxn$StatCommand@685] - Stat command output
2015-05-21 15:15:02,689 [myid:1] - INFO  [NIOWorkerThread-5:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:53528 (no session established for client)
2015-05-21 15:15:02,689 [myid:] - INFO  [main:ZooKeeper@717] - Initiating client connection, connectString=127.0.0.1:11234 sessionTimeout=30000 watcher=org.apache.zookeeper.server.quorum.ReconfigLegacyTest@327a051d
2015-05-21 15:15:02,689 [myid:] - INFO  [main-SendThread(127.0.0.1:11234):ClientCnxn$SendThread@1096] - Opening socket connection to server 127.0.0.1/127.0.0.1:11234. Will not attempt to authenticate using SASL (unknown error)
2015-05-21 15:15:02,690 [myid:] - INFO  [main-SendThread(127.0.0.1:11234):ClientCnxn$SendThread@968] - Socket connection established, initiating session, client: /127.0.0.1:53529, server: 127.0.0.1/127.0.0.1:11234
2015-05-21 15:15:02,690 [myid:1] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11234:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:53529
2015-05-21 15:15:02,691 [myid:1] - INFO  [NIOWorkerThread-6:ZooKeeperServer@931] - Client attempting to establish new session at /127.0.0.1:53529
2015-05-21 15:15:02,692 [myid:1] - WARN  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):Follower@122] - Got zxid 0x100000002 expected 0x1
2015-05-21 15:15:02,692 [myid:1] - INFO  [SyncThread:1:FileTxnLog@200] - Creating new log file: log.100000002
2015-05-21 15:15:02,700 [myid:1] - INFO  [CommitProcWorkThread-5:ZooKeeperServer@645] - Established session 0x1000627ee410000 with negotiated timeout 30000 for client /127.0.0.1:53529
2015-05-21 15:15:02,701 [myid:] - INFO  [main-SendThread(127.0.0.1:11234):ClientCnxn$SendThread@1357] - Session establishment complete on server 127.0.0.1/127.0.0.1:11234, sessionid = 0x1000627ee410000, negotiated timeout = 30000
2015-05-21 15:15:02,704 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11237
2015-05-21 15:15:02,704 [myid:2] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11237:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:54875
2015-05-21 15:15:02,705 [myid:2] - INFO  [NIOWorkerThread-1:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:54875
2015-05-21 15:15:02,706 [myid:2] - INFO  [NIOWorkerThread-1:NIOServerCnxn$StatCommand@685] - Stat command output
2015-05-21 15:15:02,706 [myid:2] - INFO  [NIOWorkerThread-1:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:54875 (no session established for client)
2015-05-21 15:15:02,707 [myid:] - INFO  [main:ZooKeeper@717] - Initiating client connection, connectString=127.0.0.1:11237 sessionTimeout=30000 watcher=org.apache.zookeeper.server.quorum.ReconfigLegacyTest@327a051d
2015-05-21 15:15:02,707 [myid:] - INFO  [main-SendThread(127.0.0.1:11237):ClientCnxn$SendThread@1096] - Opening socket connection to server 127.0.0.1/127.0.0.1:11237. Will not attempt to authenticate using SASL (unknown error)
2015-05-21 15:15:02,708 [myid:2] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11237:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:54876
2015-05-21 15:15:02,708 [myid:] - INFO  [main-SendThread(127.0.0.1:11237):ClientCnxn$SendThread@968] - Socket connection established, initiating session, client: /127.0.0.1:54876, server: 127.0.0.1/127.0.0.1:11237
2015-05-21 15:15:02,709 [myid:2] - INFO  [NIOWorkerThread-2:ZooKeeperServer@931] - Client attempting to establish new session at /127.0.0.1:54876
2015-05-21 15:15:02,724 [myid:2] - INFO  [CommitProcWorkThread-5:ZooKeeperServer@645] - Established session 0x2000627ea920000 with negotiated timeout 30000 for client /127.0.0.1:54876
2015-05-21 15:15:02,725 [myid:] - INFO  [main-SendThread(127.0.0.1:11237):ClientCnxn$SendThread@1357] - Session establishment complete on server 127.0.0.1/127.0.0.1:11237, sessionid = 0x2000627ea920000, negotiated timeout = 30000
2015-05-21 15:15:02,761 [myid:0] - INFO  [NIOWorkerThread-12:QuorumZooKeeperServer@132] - Submitting global closeSession request for session 0x627ea5b0000
2015-05-21 15:15:02,762 [myid:2] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@675] - Processed session termination for sessionid: 0x627ea5b0000
2015-05-21 15:15:02,771 [myid:] - INFO  [main:ZooKeeper@1111] - Session: 0x627ea5b0000 closed
2015-05-21 15:15:02,771 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@531] - EventThread shut down
2015-05-21 15:15:02,771 [myid:0] - INFO  [NIOWorkerThread-13:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.0,name2=Follower,name3=Connections,name4=127.0.0.1,name5=0x627ea5b0000]
2015-05-21 15:15:02,771 [myid:] - INFO  [main:QuorumBase@394] - Shutting down quorum peer QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled)
2015-05-21 15:15:02,771 [myid:0] - INFO  [NIOWorkerThread-13:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:56876 which had sessionid 0x627ea5b0000
2015-05-21 15:15:02,772 [myid:] - INFO  [main:Follower@198] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:198)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1038)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:395)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:252)
	at org.apache.zookeeper.server.quorum.ReconfigLegacyTest.testConfigFileBackwardCompatibility(ReconfigLegacyTest.java:116)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:52)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:69)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:532)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1165)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1016)
2015-05-21 15:15:02,773 [myid:] - INFO  [main:LearnerZooKeeperServer@165] - Shutting down
2015-05-21 15:15:02,773 [myid:] - INFO  [main:ZooKeeperServer@465] - shutting down
2015-05-21 15:15:02,773 [myid:] - INFO  [main:FollowerRequestProcessor@136] - Shutting down
2015-05-21 15:15:02,773 [myid:] - INFO  [main:CommitProcessor@356] - Shutting down
2015-05-21 15:15:02,773 [myid:0] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@107] - FollowerRequestProcessor exited loop!
2015-05-21 15:15:02,773 [myid:0] - INFO  [CommitProcessor:0:CommitProcessor@191] - CommitProcessor exited loop!
2015-05-21 15:15:02,773 [myid:] - INFO  [main:FinalRequestProcessor@489] - shutdown of request processor complete
2015-05-21 15:15:02,773 [myid:] - INFO  [main:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.0,name2=Follower,name3=InMemoryDataTree]
2015-05-21 15:15:02,774 [myid:] - INFO  [main:SyncRequestProcessor@191] - Shutting down
2015-05-21 15:15:02,774 [myid:0] - INFO  [SyncThread:0:SyncRequestProcessor@169] - SyncRequestProcessor exited!
2015-05-21 15:15:02,774 [myid:0] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@583] - ConnnectionExpirerThread interrupted
2015-05-21 15:15:02,775 [myid:0] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11231:NIOServerCnxnFactory$AcceptThread@219] - accept thread exitted run method
2015-05-21 15:15:02,775 [myid:0] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@420] - selector thread exitted run method
2015-05-21 15:15:02,776 [myid:0] - INFO  [NIOServerCxnFactory.SelectorThread-1:NIOServerCnxnFactory$SelectorThread@420] - selector thread exitted run method
2015-05-21 15:15:02,776 [myid:0] - INFO  [localhost/127.0.0.1:11233:QuorumCnxManager$Listener@578] - Leaving listener
2015-05-21 15:15:02,776 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@836] - Connection broken for id 0, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:02,777 [myid:] - INFO  [main:QuorumBase@398] - Shutting down leader election QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled)
2015-05-21 15:15:02,777 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:02,777 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@836] - Connection broken for id 1, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(SocketInputStream.java:152)
	at java.net.SocketInputStream.read(SocketInputStream.java:122)
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:02,776 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@836] - Connection broken for id 0, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:02,776 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:15:02,776 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:15:02,776 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@836] - Connection broken for id 2, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(SocketInputStream.java:152)
	at java.net.SocketInputStream.read(SocketInputStream.java:122)
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:02,778 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:02,778 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 2 my id = 0
2015-05-21 15:15:02,777 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 1 my id = 0
2015-05-21 15:15:02,777 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:02,777 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:02,777 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:15:02,777 [myid:] - INFO  [main:QuorumBase@403] - Waiting for QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled) to exit thread
2015-05-21 15:15:02,778 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 0 my id = 2
2015-05-21 15:15:02,778 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:15:02,779 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 0 my id = 1
2015-05-21 15:15:02,869 [myid:2] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@465] - WorkerSender is down
2015-05-21 15:15:02,869 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@435] - WorkerReceiver is down
2015-05-21 15:15:03,492 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.0,name2=Follower]
2015-05-21 15:15:03,493 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):Follower@198] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:198)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:969)
2015-05-21 15:15:03,493 [myid:0] - WARN  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):QuorumPeer@1012] - PeerState set to LOOKING
2015-05-21 15:15:03,493 [myid:0] - WARN  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):QuorumPeer@994] - QuorumPeer main thread exited
2015-05-21 15:15:03,493 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0]
2015-05-21 15:15:03,494 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.0]
2015-05-21 15:15:03,494 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.1]
2015-05-21 15:15:03,494 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.2]
2015-05-21 15:15:03,496 [myid:1] - INFO  [NIOWorkerThread-15:QuorumZooKeeperServer@132] - Submitting global closeSession request for session 0x1000627ee410000
2015-05-21 15:15:03,497 [myid:2] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@675] - Processed session termination for sessionid: 0x1000627ee410000
2015-05-21 15:15:03,512 [myid:1] - INFO  [NIOWorkerThread-16:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=Connections,name4=127.0.0.1,name5=0x1000627ee410000]
2015-05-21 15:15:03,512 [myid:] - INFO  [main:ZooKeeper@1111] - Session: 0x1000627ee410000 closed
2015-05-21 15:15:03,512 [myid:1] - INFO  [NIOWorkerThread-16:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:53529 which had sessionid 0x1000627ee410000
2015-05-21 15:15:03,512 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@531] - EventThread shut down
2015-05-21 15:15:03,512 [myid:] - INFO  [main:QuorumBase@394] - Shutting down quorum peer QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled)
2015-05-21 15:15:03,513 [myid:] - INFO  [main:Follower@198] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:198)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1038)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:395)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:252)
	at org.apache.zookeeper.server.quorum.ReconfigLegacyTest.testConfigFileBackwardCompatibility(ReconfigLegacyTest.java:116)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:52)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:69)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:532)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1165)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1016)
2015-05-21 15:15:03,514 [myid:] - INFO  [main:LearnerZooKeeperServer@165] - Shutting down
2015-05-21 15:15:03,515 [myid:] - INFO  [main:ZooKeeperServer@465] - shutting down
2015-05-21 15:15:03,515 [myid:] - INFO  [main:FollowerRequestProcessor@136] - Shutting down
2015-05-21 15:15:03,515 [myid:] - INFO  [main:CommitProcessor@356] - Shutting down
2015-05-21 15:15:03,515 [myid:1] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@107] - FollowerRequestProcessor exited loop!
2015-05-21 15:15:03,515 [myid:1] - INFO  [CommitProcessor:1:CommitProcessor@191] - CommitProcessor exited loop!
2015-05-21 15:15:03,516 [myid:] - INFO  [main:FinalRequestProcessor@489] - shutdown of request processor complete
2015-05-21 15:15:03,517 [myid:] - INFO  [main:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree]
2015-05-21 15:15:03,517 [myid:] - INFO  [main:SyncRequestProcessor@191] - Shutting down
2015-05-21 15:15:03,517 [myid:1] - INFO  [SyncThread:1:SyncRequestProcessor@169] - SyncRequestProcessor exited!
2015-05-21 15:15:03,518 [myid:1] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@583] - ConnnectionExpirerThread interrupted
2015-05-21 15:15:03,519 [myid:1] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11234:NIOServerCnxnFactory$AcceptThread@219] - accept thread exitted run method
2015-05-21 15:15:03,519 [myid:1] - INFO  [NIOServerCxnFactory.SelectorThread-1:NIOServerCnxnFactory$SelectorThread@420] - selector thread exitted run method
2015-05-21 15:15:03,520 [myid:1] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@420] - selector thread exitted run method
2015-05-21 15:15:03,520 [myid:1] - INFO  [localhost/127.0.0.1:11236:QuorumCnxManager$Listener@578] - Leaving listener
2015-05-21 15:15:03,521 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:15:03,521 [myid:] - INFO  [main:QuorumBase@398] - Shutting down leader election QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled)
2015-05-21 15:15:03,521 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@836] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(SocketInputStream.java:152)
	at java.net.SocketInputStream.read(SocketInputStream.java:122)
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:03,522 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:03,521 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@836] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:03,522 [myid:] - INFO  [main:QuorumBase@403] - Waiting for QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled) to exit thread
2015-05-21 15:15:03,522 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 2 my id = 1
2015-05-21 15:15:03,522 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:03,523 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:15:03,523 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 1 my id = 2
2015-05-21 15:15:04,200 [myid:0] - INFO  [WorkerSender[myid=0]:FastLeaderElection$Messenger$WorkerSender@465] - WorkerSender is down
2015-05-21 15:15:04,201 [myid:1] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@465] - WorkerSender is down
2015-05-21 15:15:04,202 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@435] - WorkerReceiver is down
2015-05-21 15:15:04,202 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@435] - WorkerReceiver is down
2015-05-21 15:15:05,493 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower]
2015-05-21 15:15:05,493 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):Follower@198] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:198)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:969)
2015-05-21 15:15:05,493 [myid:1] - WARN  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):QuorumPeer@1012] - PeerState set to LOOKING
2015-05-21 15:15:05,494 [myid:1] - WARN  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):QuorumPeer@994] - QuorumPeer main thread exited
2015-05-21 15:15:05,494 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1]
2015-05-21 15:15:05,494 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1]
2015-05-21 15:15:05,494 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.0]
2015-05-21 15:15:05,495 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2]
2015-05-21 15:15:05,496 [myid:2] - INFO  [NIOWorkerThread-7:QuorumZooKeeperServer@132] - Submitting global closeSession request for session 0x2000627ea920000
2015-05-21 15:15:05,497 [myid:2] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@675] - Processed session termination for sessionid: 0x2000627ea920000
2015-05-21 15:15:22,736 [myid:2] - WARN  [NIOWorkerThread-8:NIOServerCnxn@369] - Unable to read additional data from client sessionid 0x2000627ea920000, likely client has closed socket
2015-05-21 15:15:22,736 [myid:2] - INFO  [NIOWorkerThread-8:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Leader,name3=Connections,name4=127.0.0.1,name5=0x2000627ea920000]
2015-05-21 15:15:22,736 [myid:2] - INFO  [NIOWorkerThread-8:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:54876 which had sessionid 0x2000627ea920000
2015-05-21 15:15:22,835 [myid:] - INFO  [main:ZooKeeper@1111] - Session: 0x2000627ea920000 closed
2015-05-21 15:15:22,836 [myid:] - INFO  [main:QuorumBase@394] - Shutting down quorum peer QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled)
2015-05-21 15:15:22,835 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@531] - EventThread shut down
2015-05-21 15:15:22,836 [myid:] - INFO  [main:Leader@611] - Shutting down
2015-05-21 15:15:22,837 [myid:] - INFO  [main:Leader@617] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:617)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1035)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:395)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:252)
	at org.apache.zookeeper.server.quorum.ReconfigLegacyTest.testConfigFileBackwardCompatibility(ReconfigLegacyTest.java:116)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:52)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:69)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:532)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1165)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1016)
2015-05-21 15:15:22,837 [myid:] - INFO  [main:ZooKeeperServer@465] - shutting down
2015-05-21 15:15:22,838 [myid:] - INFO  [main:SessionTrackerImpl@232] - Shutting down
2015-05-21 15:15:22,838 [myid:] - INFO  [main:LeaderRequestProcessor@77] - Shutting down
2015-05-21 15:15:22,838 [myid:] - INFO  [main:PrepRequestProcessor@973] - Shutting down
2015-05-21 15:15:22,837 [myid:2] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11238:Leader$LearnerCnxAcceptor@372] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2015-05-21 15:15:22,838 [myid:2] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@155] - PrepRequestProcessor exited loop!
2015-05-21 15:15:22,838 [myid:] - INFO  [main:ProposalRequestProcessor@88] - Shutting down
2015-05-21 15:15:22,839 [myid:] - INFO  [main:CommitProcessor@356] - Shutting down
2015-05-21 15:15:22,839 [myid:2] - INFO  [CommitProcessor:2:CommitProcessor@191] - CommitProcessor exited loop!
2015-05-21 15:15:22,839 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@912] - Shutting down
2015-05-21 15:15:22,839 [myid:] - INFO  [main:FinalRequestProcessor@489] - shutdown of request processor complete
2015-05-21 15:15:22,840 [myid:] - INFO  [main:SyncRequestProcessor@191] - Shutting down
2015-05-21 15:15:22,840 [myid:2] - INFO  [SyncThread:2:SyncRequestProcessor@169] - SyncRequestProcessor exited!
2015-05-21 15:15:22,840 [myid:] - INFO  [main:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Leader,name3=InMemoryDataTree]
2015-05-21 15:15:22,841 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:36910:LearnerHandler@595] - ******* GOODBYE /127.0.0.1:36910 ********
2015-05-21 15:15:22,842 [myid:2] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@583] - ConnnectionExpirerThread interrupted
2015-05-21 15:15:22,842 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:36910:LearnerHandler@879] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1219)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:340)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:338)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:877)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:598)
2015-05-21 15:15:22,842 [myid:2] - INFO  [NIOServerCxnFactory.SelectorThread-1:NIOServerCnxnFactory$SelectorThread@420] - selector thread exitted run method
2015-05-21 15:15:22,843 [myid:2] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11237:NIOServerCnxnFactory$AcceptThread@219] - accept thread exitted run method
2015-05-21 15:15:22,841 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:36904:LearnerHandler@595] - ******* GOODBYE /127.0.0.1:36904 ********
2015-05-21 15:15:22,843 [myid:2] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@420] - selector thread exitted run method
2015-05-21 15:15:22,844 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:36904:LearnerHandler@879] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1219)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:340)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:338)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:877)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:598)
2015-05-21 15:15:22,844 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Leader]
2015-05-21 15:15:22,844 [myid:2] - INFO  [localhost/127.0.0.1:11239:QuorumCnxManager$Listener@578] - Leaving listener
2015-05-21 15:15:22,845 [myid:2] - WARN  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):QuorumPeer@981] - Unexpected exception
java.lang.InterruptedException
	at java.lang.Object.wait(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:557)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:978)
2015-05-21 15:15:22,845 [myid:] - INFO  [main:QuorumBase@398] - Shutting down leader election QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled)
2015-05-21 15:15:22,846 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):Leader@611] - Shutting down
2015-05-21 15:15:22,846 [myid:] - INFO  [main:QuorumBase@403] - Waiting for QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled) to exit thread
2015-05-21 15:15:22,846 [myid:2] - WARN  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):QuorumPeer@1012] - PeerState set to LOOKING
2015-05-21 15:15:22,846 [myid:2] - WARN  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):QuorumPeer@994] - QuorumPeer main thread exited
2015-05-21 15:15:22,847 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2]
2015-05-21 15:15:22,847 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2]
2015-05-21 15:15:22,848 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.0]
2015-05-21 15:15:22,848 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1]
2015-05-21 15:15:22,849 [myid:] - INFO  [Thread-11:QuorumPeerConfig@114] - Reading configuration from: /home/mitake/github/zookeeper.git/build/test/tmp/test6513857175236309453.junit.dir/zoo.cfg
2015-05-21 15:15:22,849 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11231
2015-05-21 15:15:22,849 [myid:] - INFO  [Thread-13:QuorumPeerConfig@114] - Reading configuration from: /home/mitake/github/zookeeper.git/build/test/tmp/test7398971180623681449.junit.dir/zoo.cfg
2015-05-21 15:15:22,849 [myid:] - INFO  [Thread-12:QuorumPeerConfig@114] - Reading configuration from: /home/mitake/github/zookeeper.git/build/test/tmp/test1587893320977124587.junit.dir/zoo.cfg
2015-05-21 15:15:22,849 [myid:] - INFO  [Thread-11:QuorumPeerConfig@306] - clientPort is not set
2015-05-21 15:15:22,850 [myid:] - INFO  [Thread-13:QuorumPeerConfig@306] - clientPort is not set
2015-05-21 15:15:22,850 [myid:] - INFO  [Thread-12:QuorumPeerConfig@306] - clientPort is not set
2015-05-21 15:15:22,850 [myid:] - INFO  [Thread-11:QuorumPeerConfig@320] - secureClientPort is not set
2015-05-21 15:15:22,850 [myid:] - INFO  [main:ClientBase@249] - server 127.0.0.1:11231 not up
java.net.ConnectException: Connection refused
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:579)
	at java.net.Socket.connect(Socket.java:528)
	at java.net.Socket.<init>(Socket.java:425)
	at java.net.Socket.<init>(Socket.java:208)
	at org.apache.zookeeper.client.FourLetterWordMain.send4LetterWord(FourLetterWordMain.java:74)
	at org.apache.zookeeper.test.ClientBase.waitForServerUp(ClientBase.java:242)
	at org.apache.zookeeper.test.ClientBase.waitForServerUp(ClientBase.java:233)
	at org.apache.zookeeper.server.quorum.ReconfigLegacyTest.testConfigFileBackwardCompatibility(ReconfigLegacyTest.java:122)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:52)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:69)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:532)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1165)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1016)
2015-05-21 15:15:22,851 [myid:0] - INFO  [Thread-11:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2015-05-21 15:15:22,850 [myid:] - INFO  [Thread-12:QuorumPeerConfig@320] - secureClientPort is not set
2015-05-21 15:15:22,850 [myid:] - INFO  [Thread-13:QuorumPeerConfig@320] - secureClientPort is not set
2015-05-21 15:15:22,851 [myid:0] - INFO  [Thread-11:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2015-05-21 15:15:22,852 [myid:0] - INFO  [Thread-11:DatadirCleanupManager@101] - Purge task is not scheduled.
2015-05-21 15:15:22,852 [myid:0] - WARN  [Thread-11:QuorumPeerMain@133] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:53)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:131)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:120)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:240)
	at java.lang.Thread.run(Thread.java:745)
2015-05-21 15:15:22,852 [myid:0] - INFO  [Thread-11:QuorumPeerMain@136] - Starting quorum peer
2015-05-21 15:15:22,852 [myid:2] - INFO  [Thread-13:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2015-05-21 15:15:22,852 [myid:1] - INFO  [Thread-12:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2015-05-21 15:15:22,852 [myid:0] - INFO  [Thread-11:NIOServerCnxnFactory@673] - Configuring NIO connection handler with 10s sessionless connection timeout, 2 selector thread(s), 24 worker threads, and 64 kB direct buffers.
2015-05-21 15:15:22,852 [myid:2] - INFO  [Thread-13:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2015-05-21 15:15:22,852 [myid:1] - INFO  [Thread-12:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2015-05-21 15:15:22,852 [myid:2] - INFO  [Thread-13:DatadirCleanupManager@101] - Purge task is not scheduled.
2015-05-21 15:15:22,852 [myid:0] - INFO  [Thread-11:NIOServerCnxnFactory@686] - binding to port localhost/127.0.0.1:11231
2015-05-21 15:15:22,852 [myid:1] - INFO  [Thread-12:DatadirCleanupManager@101] - Purge task is not scheduled.
2015-05-21 15:15:22,852 [myid:2] - WARN  [Thread-13:QuorumPeerMain@133] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:53)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:131)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:120)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:240)
	at java.lang.Thread.run(Thread.java:745)
2015-05-21 15:15:22,853 [myid:1] - WARN  [Thread-12:QuorumPeerMain@133] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:53)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:131)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:120)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:240)
	at java.lang.Thread.run(Thread.java:745)
2015-05-21 15:15:22,853 [myid:1] - INFO  [Thread-12:QuorumPeerMain@136] - Starting quorum peer
2015-05-21 15:15:22,853 [myid:0] - INFO  [Thread-11:QuorumPeer@1181] - Local sessions disabled
2015-05-21 15:15:22,853 [myid:1] - INFO  [Thread-12:NIOServerCnxnFactory@673] - Configuring NIO connection handler with 10s sessionless connection timeout, 2 selector thread(s), 24 worker threads, and 64 kB direct buffers.
2015-05-21 15:15:22,853 [myid:2] - INFO  [Thread-13:QuorumPeerMain@136] - Starting quorum peer
2015-05-21 15:15:22,853 [myid:0] - INFO  [Thread-11:QuorumPeer@1192] - Local session upgrading disabled
2015-05-21 15:15:22,853 [myid:1] - INFO  [Thread-12:NIOServerCnxnFactory@686] - binding to port localhost/127.0.0.1:11234
2015-05-21 15:15:22,853 [myid:0] - INFO  [Thread-11:QuorumPeer@1159] - tickTime set to 4000
2015-05-21 15:15:22,853 [myid:2] - INFO  [Thread-13:NIOServerCnxnFactory@673] - Configuring NIO connection handler with 10s sessionless connection timeout, 2 selector thread(s), 24 worker threads, and 64 kB direct buffers.
2015-05-21 15:15:22,853 [myid:0] - INFO  [Thread-11:QuorumPeer@1203] - minSessionTimeout set to 8000
2015-05-21 15:15:22,853 [myid:1] - INFO  [Thread-12:QuorumPeer@1181] - Local sessions disabled
2015-05-21 15:15:22,853 [myid:2] - INFO  [Thread-13:NIOServerCnxnFactory@686] - binding to port localhost/127.0.0.1:11237
2015-05-21 15:15:22,853 [myid:1] - INFO  [Thread-12:QuorumPeer@1192] - Local session upgrading disabled
2015-05-21 15:15:22,853 [myid:0] - INFO  [Thread-11:QuorumPeer@1214] - maxSessionTimeout set to 80000
2015-05-21 15:15:22,854 [myid:1] - INFO  [Thread-12:QuorumPeer@1159] - tickTime set to 4000
2015-05-21 15:15:22,854 [myid:2] - INFO  [Thread-13:QuorumPeer@1181] - Local sessions disabled
2015-05-21 15:15:22,854 [myid:0] - INFO  [Thread-11:QuorumPeer@1229] - initLimit set to 10
2015-05-21 15:15:22,854 [myid:2] - INFO  [Thread-13:QuorumPeer@1192] - Local session upgrading disabled
2015-05-21 15:15:22,854 [myid:1] - INFO  [Thread-12:QuorumPeer@1203] - minSessionTimeout set to 8000
2015-05-21 15:15:22,854 [myid:2] - INFO  [Thread-13:QuorumPeer@1159] - tickTime set to 4000
2015-05-21 15:15:22,854 [myid:1] - INFO  [Thread-12:QuorumPeer@1214] - maxSessionTimeout set to 80000
2015-05-21 15:15:22,854 [myid:2] - INFO  [Thread-13:QuorumPeer@1203] - minSessionTimeout set to 8000
2015-05-21 15:15:22,854 [myid:1] - INFO  [Thread-12:QuorumPeer@1229] - initLimit set to 10
2015-05-21 15:15:22,854 [myid:2] - INFO  [Thread-13:QuorumPeer@1214] - maxSessionTimeout set to 80000
2015-05-21 15:15:22,854 [myid:2] - INFO  [Thread-13:QuorumPeer@1229] - initLimit set to 10
2015-05-21 15:15:22,854 [myid:0] - INFO  [Thread-11:FileSnap@83] - Reading snapshot /home/mitake/github/zookeeper.git/build/test/tmp/test6513857175236309453.junit.dir/data/version-2/snapshot.0
2015-05-21 15:15:22,854 [myid:1] - INFO  [Thread-12:FileSnap@83] - Reading snapshot /home/mitake/github/zookeeper.git/build/test/tmp/test1587893320977124587.junit.dir/data/version-2/snapshot.100000001
2015-05-21 15:15:22,854 [myid:2] - INFO  [Thread-13:FileSnap@83] - Reading snapshot /home/mitake/github/zookeeper.git/build/test/tmp/test7398971180623681449.junit.dir/data/version-2/snapshot.0
2015-05-21 15:15:22,856 [myid:0] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@550] - My election bind port: localhost/127.0.0.1:11233
2015-05-21 15:15:22,856 [myid:1] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@550] - My election bind port: localhost/127.0.0.1:11236
2015-05-21 15:15:22,856 [myid:2] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@550] - My election bind port: localhost/127.0.0.1:11239
2015-05-21 15:15:22,857 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):QuorumPeer@887] - LOOKING
2015-05-21 15:15:22,858 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):FastLeaderElection@889] - New election. My id =  0, proposed zxid=0x100000006
2015-05-21 15:15:22,858 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):QuorumPeer@887] - LOOKING
2015-05-21 15:15:22,858 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):FastLeaderElection@889] - New election. My id =  1, proposed zxid=0x100000007
2015-05-21 15:15:22,858 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):QuorumPeer@887] - LOOKING
2015-05-21 15:15:22,858 [myid:0] - INFO  [localhost/127.0.0.1:11233:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:55877
2015-05-21 15:15:22,858 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):FastLeaderElection@889] - New election. My id =  2, proposed zxid=0x100000008
2015-05-21 15:15:22,858 [myid:1] - INFO  [localhost/127.0.0.1:11236:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:40071
2015-05-21 15:15:22,858 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@197] - Have smaller server identifier, so dropping the connection: (1, 0)
2015-05-21 15:15:22,858 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 0 (n.leader), 0x100000006 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,859 [myid:0] - INFO  [localhost/127.0.0.1:11233:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:55879
2015-05-21 15:15:22,859 [myid:2] - INFO  [localhost/127.0.0.1:11239:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:60167
2015-05-21 15:15:22,859 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@197] - Have smaller server identifier, so dropping the connection: (2, 0)
2015-05-21 15:15:22,859 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@836] - Connection broken for id 1, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:22,859 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 1 (n.leader), 0x100000007 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,859 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:15:22,860 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:15:22,861 [myid:2] - INFO  [localhost/127.0.0.1:11239:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:60170
2015-05-21 15:15:22,861 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 0 my id = 2
2015-05-21 15:15:22,860 [myid:1] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@197] - Have smaller server identifier, so dropping the connection: (2, 1)
2015-05-21 15:15:22,860 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 0 my id = 1
2015-05-21 15:15:22,860 [myid:1] - INFO  [localhost/127.0.0.1:11236:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:40074
2015-05-21 15:15:22,860 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@836] - Connection broken for id 0, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(SocketInputStream.java:152)
	at java.net.SocketInputStream.read(SocketInputStream.java:122)
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:22,860 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@683] - Notification: 2 (message format version), 0 (n.leader), 0x100000006 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,860 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@836] - Connection broken for id 2, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:22,862 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:22,860 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:22,860 [myid:0] - INFO  [localhost/127.0.0.1:11233:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:55882
2015-05-21 15:15:22,863 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x100000008 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,860 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 1 (n.leader), 0x100000007 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,859 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@758] - Exception when using channel: for id 1 my id = 0 error = java.net.SocketException: Broken pipe
2015-05-21 15:15:22,863 [myid:0] - INFO  [localhost/127.0.0.1:11233:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:55884
2015-05-21 15:15:22,859 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@836] - Connection broken for id 0, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(SocketInputStream.java:152)
	at java.net.SocketInputStream.read(SocketInputStream.java:122)
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:22,863 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x100000008 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,863 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:22,863 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 1 my id = 0
2015-05-21 15:15:22,863 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x100000008 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,863 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:15:22,862 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@758] - Exception when using channel: for id 2 my id = 1 error = java.net.SocketException: Broken pipe
2015-05-21 15:15:22,862 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@836] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:22,862 [myid:1] - INFO  [localhost/127.0.0.1:11236:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:40078
2015-05-21 15:15:22,862 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:22,861 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@836] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(SocketInputStream.java:152)
	at java.net.SocketInputStream.read(SocketInputStream.java:122)
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:22,865 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 2 my id = 1
2015-05-21 15:15:22,861 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:15:22,865 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:22,864 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:22,864 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 0 (n.leader), 0x100000006 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,864 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@683] - Notification: 2 (message format version), 0 (n.leader), 0x100000006 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,864 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 1 (n.leader), 0x100000007 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,864 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 2 my id = 0
2015-05-21 15:15:22,865 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 1 my id = 2
2015-05-21 15:15:22,866 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 1 (n.leader), 0x100000007 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,866 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 1 (n.leader), 0x100000007 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,866 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@683] - Notification: 2 (message format version), 1 (n.leader), 0x100000007 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,866 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x100000008 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,866 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x100000008 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,866 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x100000008 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,866 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x100000008 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,866 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x100000008 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,867 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x100000008 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,867 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x100000008 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:22,867 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 2 (n.leader), 0x100000008 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)100000000 (n.config version)
2015-05-21 15:15:23,067 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=LeaderElection]
2015-05-21 15:15:23,067 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.0,name2=LeaderElection]
2015-05-21 15:15:23,067 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):QuorumPeer@963] - FOLLOWING
2015-05-21 15:15:23,067 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):QuorumPeer@963] - FOLLOWING
2015-05-21 15:15:23,067 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):ZooKeeperServer@825] - minSessionTimeout set to 8000
2015-05-21 15:15:23,067 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):ZooKeeperServer@834] - maxSessionTimeout set to 80000
2015-05-21 15:15:23,067 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=LeaderElection]
2015-05-21 15:15:23,067 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):ZooKeeperServer@156] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /home/mitake/github/zookeeper.git/build/test/tmp/test1587893320977124587.junit.dir/data/version-2 snapdir /home/mitake/github/zookeeper.git/build/test/tmp/test1587893320977124587.junit.dir/data/version-2
2015-05-21 15:15:23,067 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):Follower@66] - FOLLOWING - LEADER ELECTION TOOK - 0
2015-05-21 15:15:23,067 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):ZooKeeperServer@825] - minSessionTimeout set to 8000
2015-05-21 15:15:23,067 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):QuorumPeer@975] - LEADING
2015-05-21 15:15:23,068 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):ZooKeeperServer@834] - maxSessionTimeout set to 80000
2015-05-21 15:15:23,068 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):ZooKeeperServer@825] - minSessionTimeout set to 8000
2015-05-21 15:15:23,068 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):ZooKeeperServer@156] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /home/mitake/github/zookeeper.git/build/test/tmp/test6513857175236309453.junit.dir/data/version-2 snapdir /home/mitake/github/zookeeper.git/build/test/tmp/test6513857175236309453.junit.dir/data/version-2
2015-05-21 15:15:23,068 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):ZooKeeperServer@834] - maxSessionTimeout set to 80000
2015-05-21 15:15:23,068 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):Follower@66] - FOLLOWING - LEADER ELECTION TOOK - 0
2015-05-21 15:15:23,068 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):ZooKeeperServer@156] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /home/mitake/github/zookeeper.git/build/test/tmp/test7398971180623681449.junit.dir/data/version-2 snapdir /home/mitake/github/zookeeper.git/build/test/tmp/test7398971180623681449.junit.dir/data/version-2
2015-05-21 15:15:23,068 [myid:1] - WARN  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):Learner@273] - Unexpected exception, tries=0, remaining init limit=40000, connecting to localhost/127.0.0.1:11238
java.net.ConnectException: Connection refused
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:579)
	at org.apache.zookeeper.server.quorum.Learner.sockConnect(Learner.java:227)
	at org.apache.zookeeper.server.quorum.Learner.connectToLeader(Learner.java:256)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:74)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:965)
2015-05-21 15:15:23,068 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):Leader@410] - LEADING - LEADER ELECTION TOOK - 0
2015-05-21 15:15:23,068 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):FileTxnSnapLog@298] - Snapshotting: 0x100000008 to /home/mitake/github/zookeeper.git/build/test/tmp/test7398971180623681449.junit.dir/data/version-2/snapshot.100000008
2015-05-21 15:15:23,069 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:36927:LearnerHandler@361] - Follower sid: 0 : info : localhost:11232:11233:participant;localhost:11231
2015-05-21 15:15:23,083 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:36927:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x100000008 minCommittedLog=0x100000001 lastProcessedZxid=0x100000008 peerLastZxid=0x100000006
2015-05-21 15:15:23,083 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:36927:LearnerHandler@720] - Using committedLog for peer sid: 0
2015-05-21 15:15:23,083 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:36927:LearnerHandler@810] - Sending DIFF zxid=0x100000008 for peer sid: 0
2015-05-21 15:15:23,084 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):Learner@366] - Getting a diff from the leader 0x100000008
2015-05-21 15:15:23,086 [myid:0] - WARN  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):Learner@417] - Got zxid 0x100000007 expected 0x1
2015-05-21 15:15:23,086 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):Learner@509] - Learner received NEWLEADER message
2015-05-21 15:15:23,087 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):FileTxnSnapLog@298] - Snapshotting: 0x100000008 to /home/mitake/github/zookeeper.git/build/test/tmp/test6513857175236309453.junit.dir/data/version-2/snapshot.100000008
2015-05-21 15:15:23,101 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11231
2015-05-21 15:15:23,102 [myid:0] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11231:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:56898
2015-05-21 15:15:23,103 [myid:0] - INFO  [NIOWorkerThread-1:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:56898
2015-05-21 15:15:23,104 [myid:0] - INFO  [NIOWorkerThread-1:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:56898 (no session established for client)
2015-05-21 15:15:23,107 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):Leader@1243] - Have quorum of supporters, sids: [ [0, 2] ]; starting up and setting last processed zxid: 0x200000000
2015-05-21 15:15:23,108 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):CommitProcessor@252] - Configuring CommitProcessor with 12 worker threads.
2015-05-21 15:15:23,111 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):Learner@493] - Learner received UPTODATE message
2015-05-21 15:15:23,111 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):CommitProcessor@252] - Configuring CommitProcessor with 12 worker threads.
2015-05-21 15:15:23,354 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11231
2015-05-21 15:15:23,354 [myid:0] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11231:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:56899
2015-05-21 15:15:23,355 [myid:0] - INFO  [NIOWorkerThread-2:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:56899
2015-05-21 15:15:23,355 [myid:0] - INFO  [NIOWorkerThread-2:NIOServerCnxn$StatCommand@685] - Stat command output
2015-05-21 15:15:23,355 [myid:0] - INFO  [NIOWorkerThread-2:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:56899 (no session established for client)
2015-05-21 15:15:23,355 [myid:] - INFO  [main:ZooKeeper@717] - Initiating client connection, connectString=127.0.0.1:11231 sessionTimeout=30000 watcher=org.apache.zookeeper.server.quorum.ReconfigLegacyTest@327a051d
2015-05-21 15:15:23,356 [myid:] - INFO  [main-SendThread(127.0.0.1:11231):ClientCnxn$SendThread@1096] - Opening socket connection to server 127.0.0.1/127.0.0.1:11231. Will not attempt to authenticate using SASL (unknown error)
2015-05-21 15:15:23,356 [myid:0] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11231:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:56900
2015-05-21 15:15:23,356 [myid:] - INFO  [main-SendThread(127.0.0.1:11231):ClientCnxn$SendThread@968] - Socket connection established, initiating session, client: /127.0.0.1:56900, server: 127.0.0.1/127.0.0.1:11231
2015-05-21 15:15:23,356 [myid:0] - INFO  [NIOWorkerThread-3:ZooKeeperServer@931] - Client attempting to establish new session at /127.0.0.1:56900
2015-05-21 15:15:23,357 [myid:2] - INFO  [SyncThread:2:FileTxnLog@200] - Creating new log file: log.200000001
2015-05-21 15:15:23,357 [myid:0] - WARN  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):Follower@122] - Got zxid 0x200000001 expected 0x1
2015-05-21 15:15:23,357 [myid:0] - INFO  [SyncThread:0:FileTxnLog@200] - Creating new log file: log.200000001
2015-05-21 15:15:23,372 [myid:0] - INFO  [CommitProcWorkThread-5:ZooKeeperServer@645] - Established session 0x6283eee0000 with negotiated timeout 30000 for client /127.0.0.1:56900
2015-05-21 15:15:23,373 [myid:] - INFO  [main-SendThread(127.0.0.1:11231):ClientCnxn$SendThread@1357] - Session establishment complete on server 127.0.0.1/127.0.0.1:11231, sessionid = 0x6283eee0000, negotiated timeout = 30000
2015-05-21 15:15:23,377 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11234
2015-05-21 15:15:23,377 [myid:1] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11234:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:53547
2015-05-21 15:15:23,379 [myid:1] - INFO  [NIOWorkerThread-1:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:53547
2015-05-21 15:15:23,379 [myid:1] - INFO  [NIOWorkerThread-1:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:53547 (no session established for client)
2015-05-21 15:15:23,629 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11234
2015-05-21 15:15:23,630 [myid:1] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11234:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:53548
2015-05-21 15:15:23,631 [myid:1] - INFO  [NIOWorkerThread-2:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:53548
2015-05-21 15:15:23,632 [myid:1] - INFO  [NIOWorkerThread-2:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:53548 (no session established for client)
2015-05-21 15:15:23,882 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11234
2015-05-21 15:15:23,883 [myid:1] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11234:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:53549
2015-05-21 15:15:23,884 [myid:1] - INFO  [NIOWorkerThread-3:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:53549
2015-05-21 15:15:23,885 [myid:1] - INFO  [NIOWorkerThread-3:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:53549 (no session established for client)
2015-05-21 15:15:24,069 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:36934:LearnerHandler@361] - Follower sid: 1 : info : localhost:11235:11236:participant;localhost:11234
2015-05-21 15:15:24,077 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:36934:LearnerHandler@659] - Synchronizing with Follower sid: 1 maxCommittedLog=0x200000001 minCommittedLog=0x100000001 lastProcessedZxid=0x200000001 peerLastZxid=0x100000007
2015-05-21 15:15:24,077 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:36934:LearnerHandler@720] - Using committedLog for peer sid: 1
2015-05-21 15:15:24,077 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:36934:LearnerHandler@810] - Sending DIFF zxid=0x200000001 for peer sid: 1
2015-05-21 15:15:24,079 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):Learner@366] - Getting a diff from the leader 0x200000001
2015-05-21 15:15:24,079 [myid:1] - WARN  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):Learner@417] - Got zxid 0x100000008 expected 0x1
2015-05-21 15:15:24,080 [myid:1] - WARN  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):Learner@417] - Got zxid 0x200000001 expected 0x100000009
2015-05-21 15:15:24,080 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):Learner@509] - Learner received NEWLEADER message
2015-05-21 15:15:24,081 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):FileTxnSnapLog@298] - Snapshotting: 0x200000001 to /home/mitake/github/zookeeper.git/build/test/tmp/test1587893320977124587.junit.dir/data/version-2/snapshot.200000001
2015-05-21 15:15:24,094 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):Learner@493] - Learner received UPTODATE message
2015-05-21 15:15:24,094 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):CommitProcessor@252] - Configuring CommitProcessor with 12 worker threads.
2015-05-21 15:15:24,135 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11234
2015-05-21 15:15:24,136 [myid:1] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11234:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:53551
2015-05-21 15:15:24,137 [myid:1] - INFO  [NIOWorkerThread-4:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:53551
2015-05-21 15:15:24,137 [myid:1] - INFO  [NIOWorkerThread-4:NIOServerCnxn$StatCommand@685] - Stat command output
2015-05-21 15:15:24,138 [myid:1] - INFO  [NIOWorkerThread-4:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:53551 (no session established for client)
2015-05-21 15:15:24,138 [myid:] - INFO  [main:ZooKeeper@717] - Initiating client connection, connectString=127.0.0.1:11234 sessionTimeout=30000 watcher=org.apache.zookeeper.server.quorum.ReconfigLegacyTest@327a051d
2015-05-21 15:15:24,140 [myid:] - INFO  [main-SendThread(127.0.0.1:11234):ClientCnxn$SendThread@1096] - Opening socket connection to server 127.0.0.1/127.0.0.1:11234. Will not attempt to authenticate using SASL (unknown error)
2015-05-21 15:15:24,140 [myid:1] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11234:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:53552
2015-05-21 15:15:24,140 [myid:] - INFO  [main-SendThread(127.0.0.1:11234):ClientCnxn$SendThread@968] - Socket connection established, initiating session, client: /127.0.0.1:53552, server: 127.0.0.1/127.0.0.1:11234
2015-05-21 15:15:24,142 [myid:1] - INFO  [NIOWorkerThread-5:ZooKeeperServer@931] - Client attempting to establish new session at /127.0.0.1:53552
2015-05-21 15:15:24,143 [myid:1] - WARN  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):Follower@122] - Got zxid 0x200000002 expected 0x1
2015-05-21 15:15:24,144 [myid:1] - INFO  [SyncThread:1:FileTxnLog@200] - Creating new log file: log.200000002
2015-05-21 15:15:24,158 [myid:1] - INFO  [CommitProcWorkThread-1:ZooKeeperServer@645] - Established session 0x100062842d00000 with negotiated timeout 30000 for client /127.0.0.1:53552
2015-05-21 15:15:24,159 [myid:] - INFO  [main-SendThread(127.0.0.1:11234):ClientCnxn$SendThread@1357] - Session establishment complete on server 127.0.0.1/127.0.0.1:11234, sessionid = 0x100062842d00000, negotiated timeout = 30000
2015-05-21 15:15:24,164 [myid:] - INFO  [main:FourLetterWordMain@63] - connecting to 127.0.0.1 11237
2015-05-21 15:15:24,164 [myid:2] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11237:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:54898
2015-05-21 15:15:24,166 [myid:2] - INFO  [NIOWorkerThread-1:NIOServerCnxn@836] - Processing stat command from /127.0.0.1:54898
2015-05-21 15:15:24,166 [myid:2] - INFO  [NIOWorkerThread-1:NIOServerCnxn$StatCommand@685] - Stat command output
2015-05-21 15:15:24,167 [myid:2] - INFO  [NIOWorkerThread-1:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:54898 (no session established for client)
2015-05-21 15:15:24,167 [myid:] - INFO  [main:ZooKeeper@717] - Initiating client connection, connectString=127.0.0.1:11237 sessionTimeout=30000 watcher=org.apache.zookeeper.server.quorum.ReconfigLegacyTest@327a051d
2015-05-21 15:15:24,169 [myid:] - INFO  [main-SendThread(127.0.0.1:11237):ClientCnxn$SendThread@1096] - Opening socket connection to server 127.0.0.1/127.0.0.1:11237. Will not attempt to authenticate using SASL (unknown error)
2015-05-21 15:15:24,170 [myid:2] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11237:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:54899
2015-05-21 15:15:24,170 [myid:] - INFO  [main-SendThread(127.0.0.1:11237):ClientCnxn$SendThread@968] - Socket connection established, initiating session, client: /127.0.0.1:54899, server: 127.0.0.1/127.0.0.1:11237
2015-05-21 15:15:24,171 [myid:2] - INFO  [NIOWorkerThread-2:ZooKeeperServer@931] - Client attempting to establish new session at /127.0.0.1:54899
2015-05-21 15:15:24,185 [myid:2] - INFO  [CommitProcWorkThread-9:ZooKeeperServer@645] - Established session 0x20006283f050000 with negotiated timeout 30000 for client /127.0.0.1:54899
2015-05-21 15:15:24,186 [myid:] - INFO  [main-SendThread(127.0.0.1:11237):ClientCnxn$SendThread@1357] - Session establishment complete on server 127.0.0.1/127.0.0.1:11237, sessionid = 0x20006283f050000, negotiated timeout = 30000
2015-05-21 15:15:24,191 [myid:2] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@849] - Got user-level KeeperException when processing sessionid:0x6283eee0000 type:create cxid:0x3 zxid:0x200000004 txntype:-1 reqpath:n/a Error Path:/test Error:KeeperErrorCode = NodeExists for /test
2015-05-21 15:15:24,215 [myid:] - INFO  [main:QuorumBase@394] - Shutting down quorum peer QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled)
2015-05-21 15:15:24,215 [myid:] - INFO  [main:Follower@198] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:198)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1038)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:395)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:252)
	at org.apache.zookeeper.server.quorum.ReconfigLegacyTest.testConfigFileBackwardCompatibility(ReconfigLegacyTest.java:131)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:52)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:69)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:532)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1165)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1016)
2015-05-21 15:15:24,217 [myid:] - INFO  [main:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.0,name2=Follower,name3=Connections,name4=127.0.0.1,name5=0x6283eee0000]
2015-05-21 15:15:24,217 [myid:] - INFO  [main:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:56900 which had sessionid 0x6283eee0000
2015-05-21 15:15:24,217 [myid:] - INFO  [main:LearnerZooKeeperServer@165] - Shutting down
2015-05-21 15:15:24,218 [myid:] - INFO  [main-SendThread(127.0.0.1:11231):ClientCnxn$SendThread@1211] - Unable to read additional data from server sessionid 0x6283eee0000, likely server has closed socket, closing socket connection and attempting reconnect
2015-05-21 15:15:24,218 [myid:] - INFO  [main:ZooKeeperServer@465] - shutting down
2015-05-21 15:15:24,218 [myid:] - INFO  [main:FollowerRequestProcessor@136] - Shutting down
2015-05-21 15:15:24,218 [myid:] - INFO  [main:CommitProcessor@356] - Shutting down
2015-05-21 15:15:24,219 [myid:0] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@107] - FollowerRequestProcessor exited loop!
2015-05-21 15:15:24,219 [myid:0] - INFO  [CommitProcessor:0:CommitProcessor@191] - CommitProcessor exited loop!
2015-05-21 15:15:24,219 [myid:] - INFO  [main:FinalRequestProcessor@489] - shutdown of request processor complete
2015-05-21 15:15:24,220 [myid:] - INFO  [main:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.0,name2=Follower,name3=InMemoryDataTree]
2015-05-21 15:15:24,220 [myid:] - INFO  [main:SyncRequestProcessor@191] - Shutting down
2015-05-21 15:15:24,220 [myid:0] - INFO  [SyncThread:0:SyncRequestProcessor@169] - SyncRequestProcessor exited!
2015-05-21 15:15:24,220 [myid:0] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@583] - ConnnectionExpirerThread interrupted
2015-05-21 15:15:24,220 [myid:0] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@420] - selector thread exitted run method
2015-05-21 15:15:24,221 [myid:0] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11231:NIOServerCnxnFactory$AcceptThread@219] - accept thread exitted run method
2015-05-21 15:15:24,221 [myid:0] - INFO  [NIOServerCxnFactory.SelectorThread-1:NIOServerCnxnFactory$SelectorThread@420] - selector thread exitted run method
2015-05-21 15:15:24,221 [myid:0] - INFO  [localhost/127.0.0.1:11233:QuorumCnxManager$Listener@578] - Leaving listener
2015-05-21 15:15:24,222 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:15:24,222 [myid:] - INFO  [main:QuorumBase@398] - Shutting down leader election QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled)
2015-05-21 15:15:24,222 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@836] - Connection broken for id 1, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(SocketInputStream.java:152)
	at java.net.SocketInputStream.read(SocketInputStream.java:122)
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:24,222 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:15:24,222 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@836] - Connection broken for id 2, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(SocketInputStream.java:152)
	at java.net.SocketInputStream.read(SocketInputStream.java:122)
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:24,222 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@836] - Connection broken for id 0, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:24,222 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@836] - Connection broken for id 0, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:24,223 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:24,223 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:24,223 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 1 my id = 0
2015-05-21 15:15:24,223 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:24,222 [myid:] - INFO  [main:QuorumBase@403] - Waiting for QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled) to exit thread
2015-05-21 15:15:24,222 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 2 my id = 0
2015-05-21 15:15:24,223 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:15:24,223 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:24,224 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 0 my id = 1
2015-05-21 15:15:24,224 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:15:24,224 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 0 my id = 2
2015-05-21 15:15:25,111 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.0,name2=Follower]
2015-05-21 15:15:25,112 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):Follower@198] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:198)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:969)
2015-05-21 15:15:25,112 [myid:0] - WARN  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):QuorumPeer@1012] - PeerState set to LOOKING
2015-05-21 15:15:25,112 [myid:0] - WARN  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):QuorumPeer@994] - QuorumPeer main thread exited
2015-05-21 15:15:25,112 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0]
2015-05-21 15:15:25,113 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.0]
2015-05-21 15:15:25,113 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.1]
2015-05-21 15:15:25,113 [myid:0] - INFO  [QuorumPeer[myid=0](plain=/127.0.0.1:11231)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id0,name1=replica.2]
2015-05-21 15:15:25,197 [myid:2] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@465] - WorkerSender is down
2015-05-21 15:15:25,203 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@435] - WorkerReceiver is down
2015-05-21 15:15:25,865 [myid:0] - INFO  [WorkerSender[myid=0]:FastLeaderElection$Messenger$WorkerSender@465] - WorkerSender is down
2015-05-21 15:15:25,867 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@435] - WorkerReceiver is down
2015-05-21 15:15:26,240 [myid:2] - INFO  [SessionTracker:SessionTrackerImpl@158] - SessionTrackerImpl exited loop!
2015-05-21 15:15:26,287 [myid:] - INFO  [main-SendThread(127.0.0.1:11231):ClientCnxn$SendThread@1096] - Opening socket connection to server 127.0.0.1/127.0.0.1:11231. Will not attempt to authenticate using SASL (unknown error)
2015-05-21 15:15:26,388 [myid:] - INFO  [main:ZooKeeper@1111] - Session: 0x6283eee0000 closed
2015-05-21 15:15:26,388 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@531] - EventThread shut down
2015-05-21 15:15:26,388 [myid:] - INFO  [main:QuorumBase@394] - Shutting down quorum peer QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled)
2015-05-21 15:15:26,389 [myid:] - INFO  [main:Follower@198] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:198)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1038)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:395)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:252)
	at org.apache.zookeeper.server.quorum.ReconfigLegacyTest.testConfigFileBackwardCompatibility(ReconfigLegacyTest.java:131)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:52)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:69)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:532)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1165)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1016)
2015-05-21 15:15:26,390 [myid:] - INFO  [main:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=Connections,name4=127.0.0.1,name5=0x100062842d00000]
2015-05-21 15:15:26,390 [myid:] - INFO  [main:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:53552 which had sessionid 0x100062842d00000
2015-05-21 15:15:26,391 [myid:] - INFO  [main:LearnerZooKeeperServer@165] - Shutting down
2015-05-21 15:15:26,391 [myid:] - INFO  [main-SendThread(127.0.0.1:11234):ClientCnxn$SendThread@1211] - Unable to read additional data from server sessionid 0x100062842d00000, likely server has closed socket, closing socket connection and attempting reconnect
2015-05-21 15:15:26,391 [myid:] - INFO  [main:ZooKeeperServer@465] - shutting down
2015-05-21 15:15:26,391 [myid:] - INFO  [main:FollowerRequestProcessor@136] - Shutting down
2015-05-21 15:15:26,392 [myid:] - INFO  [main:CommitProcessor@356] - Shutting down
2015-05-21 15:15:26,392 [myid:1] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@107] - FollowerRequestProcessor exited loop!
2015-05-21 15:15:26,392 [myid:1] - INFO  [CommitProcessor:1:CommitProcessor@191] - CommitProcessor exited loop!
2015-05-21 15:15:26,392 [myid:] - INFO  [main:FinalRequestProcessor@489] - shutdown of request processor complete
2015-05-21 15:15:26,393 [myid:] - INFO  [main:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree]
2015-05-21 15:15:26,393 [myid:] - INFO  [main:SyncRequestProcessor@191] - Shutting down
2015-05-21 15:15:26,393 [myid:1] - INFO  [SyncThread:1:SyncRequestProcessor@169] - SyncRequestProcessor exited!
2015-05-21 15:15:26,401 [myid:1] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@583] - ConnnectionExpirerThread interrupted
2015-05-21 15:15:26,403 [myid:1] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11234:NIOServerCnxnFactory$AcceptThread@219] - accept thread exitted run method
2015-05-21 15:15:26,403 [myid:1] - INFO  [NIOServerCxnFactory.SelectorThread-1:NIOServerCnxnFactory$SelectorThread@420] - selector thread exitted run method
2015-05-21 15:15:26,403 [myid:1] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@420] - selector thread exitted run method
2015-05-21 15:15:26,404 [myid:1] - INFO  [localhost/127.0.0.1:11236:QuorumCnxManager$Listener@578] - Leaving listener
2015-05-21 15:15:26,404 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:15:26,404 [myid:] - INFO  [main:QuorumBase@398] - Shutting down leader election QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled)
2015-05-21 15:15:26,404 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@836] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(SocketInputStream.java:152)
	at java.net.SocketInputStream.read(SocketInputStream.java:122)
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:26,404 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@836] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:15:26,406 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:26,405 [myid:] - INFO  [main:QuorumBase@403] - Waiting for QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled) to exit thread
2015-05-21 15:15:26,405 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 2 my id = 1
2015-05-21 15:15:26,406 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:15:26,406 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:15:26,407 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 1 my id = 2
2015-05-21 15:15:26,407 [myid:2] - ERROR [LearnerHandler-/127.0.0.1:36927:LearnerHandler@580] - Unexpected exception causing shutdown while sock still open
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:83)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:493)
2015-05-21 15:15:26,407 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:36927:LearnerHandler@595] - ******* GOODBYE /127.0.0.1:36927 ********
2015-05-21 15:15:27,112 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower]
2015-05-21 15:15:27,112 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):Follower@198] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:198)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:969)
2015-05-21 15:15:27,112 [myid:1] - WARN  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):QuorumPeer@1012] - PeerState set to LOOKING
2015-05-21 15:15:27,113 [myid:1] - WARN  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):QuorumPeer@994] - QuorumPeer main thread exited
2015-05-21 15:15:27,113 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1]
2015-05-21 15:15:27,113 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1]
2015-05-21 15:15:27,113 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.0]
2015-05-21 15:15:27,114 [myid:1] - INFO  [QuorumPeer[myid=1](plain=/127.0.0.1:11234)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2]
2015-05-21 15:15:27,733 [myid:] - INFO  [main-SendThread(127.0.0.1:11234):ClientCnxn$SendThread@1096] - Opening socket connection to server 127.0.0.1/127.0.0.1:11234. Will not attempt to authenticate using SASL (unknown error)
2015-05-21 15:15:27,833 [myid:] - INFO  [main:ZooKeeper@1111] - Session: 0x100062842d00000 closed
2015-05-21 15:15:27,833 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@531] - EventThread shut down
2015-05-21 15:15:27,834 [myid:] - INFO  [main:QuorumBase@394] - Shutting down quorum peer QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled)
2015-05-21 15:15:27,834 [myid:] - INFO  [main:Leader@611] - Shutting down
2015-05-21 15:15:27,834 [myid:] - INFO  [main:Leader@617] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:617)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1035)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:395)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:252)
	at org.apache.zookeeper.server.quorum.ReconfigLegacyTest.testConfigFileBackwardCompatibility(ReconfigLegacyTest.java:131)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:52)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:69)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:532)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1165)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1016)
2015-05-21 15:15:27,836 [myid:2] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11238:Leader$LearnerCnxAcceptor@372] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2015-05-21 15:15:27,836 [myid:] - INFO  [main:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Leader,name3=Connections,name4=127.0.0.1,name5=0x20006283f050000]
2015-05-21 15:15:27,836 [myid:] - INFO  [main:NIOServerCnxn@1007] - Closed socket connection for client /127.0.0.1:54899 which had sessionid 0x20006283f050000
2015-05-21 15:15:27,836 [myid:] - INFO  [main:ZooKeeperServer@465] - shutting down
2015-05-21 15:15:27,836 [myid:] - INFO  [main-SendThread(127.0.0.1:11237):ClientCnxn$SendThread@1211] - Unable to read additional data from server sessionid 0x20006283f050000, likely server has closed socket, closing socket connection and attempting reconnect
2015-05-21 15:15:27,837 [myid:] - INFO  [main:SessionTrackerImpl@232] - Shutting down
2015-05-21 15:15:27,837 [myid:] - INFO  [main:LeaderRequestProcessor@77] - Shutting down
2015-05-21 15:15:27,837 [myid:] - INFO  [main:PrepRequestProcessor@973] - Shutting down
2015-05-21 15:15:27,837 [myid:] - INFO  [main:ProposalRequestProcessor@88] - Shutting down
2015-05-21 15:15:27,838 [myid:] - INFO  [main:CommitProcessor@356] - Shutting down
2015-05-21 15:15:27,837 [myid:2] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@155] - PrepRequestProcessor exited loop!
2015-05-21 15:15:27,838 [myid:2] - INFO  [CommitProcessor:2:CommitProcessor@191] - CommitProcessor exited loop!
2015-05-21 15:15:27,839 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@912] - Shutting down
2015-05-21 15:15:27,839 [myid:] - INFO  [main:FinalRequestProcessor@489] - shutdown of request processor complete
2015-05-21 15:15:27,839 [myid:] - INFO  [main:SyncRequestProcessor@191] - Shutting down
2015-05-21 15:15:27,839 [myid:2] - INFO  [SyncThread:2:SyncRequestProcessor@169] - SyncRequestProcessor exited!
2015-05-21 15:15:27,840 [myid:] - INFO  [main:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Leader,name3=InMemoryDataTree]
2015-05-21 15:15:27,841 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:36934:LearnerHandler@595] - ******* GOODBYE /127.0.0.1:36934 ********
2015-05-21 15:15:27,841 [myid:2] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@583] - ConnnectionExpirerThread interrupted
2015-05-21 15:15:27,841 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:36934:LearnerHandler@879] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1219)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:340)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:338)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:877)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:598)
2015-05-21 15:15:27,841 [myid:2] - INFO  [NIOServerCxnFactory.AcceptThread:localhost/127.0.0.1:11237:NIOServerCnxnFactory$AcceptThread@219] - accept thread exitted run method
2015-05-21 15:15:27,842 [myid:2] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@420] - selector thread exitted run method
2015-05-21 15:15:27,842 [myid:2] - INFO  [NIOServerCxnFactory.SelectorThread-1:NIOServerCnxnFactory$SelectorThread@420] - selector thread exitted run method
2015-05-21 15:15:27,842 [myid:2] - INFO  [localhost/127.0.0.1:11239:QuorumCnxManager$Listener@578] - Leaving listener
2015-05-21 15:15:27,842 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Leader]
2015-05-21 15:15:27,843 [myid:] - INFO  [main:QuorumBase@398] - Shutting down leader election QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled)
2015-05-21 15:15:27,843 [myid:2] - WARN  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):QuorumPeer@981] - Unexpected exception
java.lang.InterruptedException
	at java.lang.Object.wait(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:557)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:978)
2015-05-21 15:15:27,843 [myid:] - INFO  [main:QuorumBase@403] - Waiting for QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled) to exit thread
2015-05-21 15:15:27,843 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):Leader@611] - Shutting down
2015-05-21 15:15:27,843 [myid:2] - WARN  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):QuorumPeer@1012] - PeerState set to LOOKING
2015-05-21 15:15:27,843 [myid:2] - WARN  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):QuorumPeer@994] - QuorumPeer main thread exited
2015-05-21 15:15:27,843 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2]
2015-05-21 15:15:27,843 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2]
2015-05-21 15:15:27,844 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.0]
2015-05-21 15:15:27,844 [myid:2] - INFO  [QuorumPeer[myid=2](plain=/127.0.0.1:11237)(secure=disabled):MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1]
2015-05-21 15:15:27,937 [myid:] - INFO  [main:ZooKeeper@1111] - Session: 0x20006283f050000 closed
2015-05-21 15:15:27,937 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@531] - EventThread shut down
2015-05-21 15:15:27,937 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@55] - Memory used 6923
2015-05-21 15:15:27,937 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@60] - Number of threads 10
2015-05-21 15:15:27,937 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@65] - FINISHED TEST METHOD testConfigFileBackwardCompatibility
2015-05-21 15:15:27,938 [myid:] - INFO  [main:ZKTestCase$1@65] - SUCCEEDED testConfigFileBackwardCompatibility
2015-05-21 15:15:27,938 [myid:] - INFO  [main:ZKTestCase$1@60] - FINISHED testConfigFileBackwardCompatibility
------------- ---------------- ---------------

Testcase: testReconfigRemoveClientFromStatic took 5 sec
Testcase: testConfigFileBackwardCompatibility took 26.81 sec
