Testsuite: org.apache.zookeeper.server.quorum.LearnerHandlerTest
Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.192 sec
------------- Standard Output ---------------
2015-05-21 15:11:07,954 [myid:] - INFO  [main:ZKTestCase$1@55] - STARTING testEmptyCommittedLog
2015-05-21 15:11:08,062 [myid:] - INFO  [main:Leader@63] - TCP NoDelay set to: true
2015-05-21 15:11:08,062 [myid:] - INFO  [main:Leader@83] - zookeeper.leader.maxConcurrentSnapshots = 10
2015-05-21 15:11:08,062 [myid:] - INFO  [main:Leader@85] - zookeeper.leader.maxConcurrentSnapshotTimeout = 5
2015-05-21 15:11:08,104 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@50] - RUNNING TEST METHOD testEmptyCommittedLog
2015-05-21 15:11:08,105 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x1 peerLastZxid=0x3
2015-05-21 15:11:08,106 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x1 peerLastZxid=0x1
2015-05-21 15:11:08,106 [myid:] - INFO  [main:LearnerHandler@703] - Sending DIFF zxid=0x1 for peer sid: 0
2015-05-21 15:11:08,106 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x1 peerLastZxid=0x0
2015-05-21 15:11:08,106 [myid:] - WARN  [main:LearnerHandler@751] - Unhandled scenario for peer sid: 0
2015-05-21 15:11:08,107 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@55] - Memory used 21136
2015-05-21 15:11:08,107 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@60] - Number of threads 4
2015-05-21 15:11:08,107 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@65] - FINISHED TEST METHOD testEmptyCommittedLog
2015-05-21 15:11:08,107 [myid:] - INFO  [main:ZKTestCase$1@65] - SUCCEEDED testEmptyCommittedLog
2015-05-21 15:11:08,107 [myid:] - INFO  [main:ZKTestCase$1@60] - FINISHED testEmptyCommittedLog
2015-05-21 15:11:08,109 [myid:] - INFO  [main:ZKTestCase$1@55] - STARTING testCommittedLog
2015-05-21 15:11:08,112 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@50] - RUNNING TEST METHOD testCommittedLog
2015-05-21 15:11:08,112 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x5 minCommittedLog=0x2 lastProcessedZxid=0x6 peerLastZxid=0x4
2015-05-21 15:11:08,112 [myid:] - INFO  [main:LearnerHandler@720] - Using committedLog for peer sid: 0
2015-05-21 15:11:08,112 [myid:] - INFO  [main:LearnerHandler@838] - Sending TRUNC zxid=0x3 for peer sid: 0
2015-05-21 15:11:08,113 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x5 minCommittedLog=0x2 lastProcessedZxid=0x6 peerLastZxid=0x2
2015-05-21 15:11:08,113 [myid:] - INFO  [main:LearnerHandler@720] - Using committedLog for peer sid: 0
2015-05-21 15:11:08,113 [myid:] - INFO  [main:LearnerHandler@810] - Sending DIFF zxid=0x5 for peer sid: 0
2015-05-21 15:11:08,113 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x5 minCommittedLog=0x2 lastProcessedZxid=0x6 peerLastZxid=0x1
2015-05-21 15:11:08,113 [myid:] - WARN  [main:LearnerHandler@751] - Unhandled scenario for peer sid: 0
2015-05-21 15:11:08,113 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@55] - Memory used 21136
2015-05-21 15:11:08,113 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@60] - Number of threads 4
2015-05-21 15:11:08,114 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@65] - FINISHED TEST METHOD testCommittedLog
2015-05-21 15:11:08,114 [myid:] - INFO  [main:ZKTestCase$1@65] - SUCCEEDED testCommittedLog
2015-05-21 15:11:08,114 [myid:] - INFO  [main:ZKTestCase$1@60] - FINISHED testCommittedLog
2015-05-21 15:11:08,114 [myid:] - INFO  [main:ZKTestCase$1@55] - STARTING testTxnLog
2015-05-21 15:11:08,115 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@50] - RUNNING TEST METHOD testTxnLog
2015-05-21 15:11:08,115 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x8 minCommittedLog=0x6 lastProcessedZxid=0x9 peerLastZxid=0x4
2015-05-21 15:11:08,115 [myid:] - INFO  [main:LearnerHandler@735] - Use txnlog and committedLog for peer sid: 0
2015-05-21 15:11:08,115 [myid:] - INFO  [main:LearnerHandler@838] - Sending TRUNC zxid=0x3 for peer sid: 0
2015-05-21 15:11:08,116 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x8 minCommittedLog=0x6 lastProcessedZxid=0x9 peerLastZxid=0x3
2015-05-21 15:11:08,116 [myid:] - INFO  [main:LearnerHandler@735] - Use txnlog and committedLog for peer sid: 0
2015-05-21 15:11:08,116 [myid:] - INFO  [main:LearnerHandler@810] - Sending DIFF zxid=0x8 for peer sid: 0
2015-05-21 15:11:08,116 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@55] - Memory used 21136
2015-05-21 15:11:08,116 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@60] - Number of threads 4
2015-05-21 15:11:08,117 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@65] - FINISHED TEST METHOD testTxnLog
2015-05-21 15:11:08,117 [myid:] - INFO  [main:ZKTestCase$1@65] - SUCCEEDED testTxnLog
2015-05-21 15:11:08,117 [myid:] - INFO  [main:ZKTestCase$1@60] - FINISHED testTxnLog
2015-05-21 15:11:08,117 [myid:] - INFO  [main:ZKTestCase$1@55] - STARTING testTxnLogProposalIteratorClosure
2015-05-21 15:11:08,118 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@50] - RUNNING TEST METHOD testTxnLogProposalIteratorClosure
2015-05-21 15:11:08,118 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x7 peerLastZxid=0x4
2015-05-21 15:11:08,118 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@55] - Memory used 21136
2015-05-21 15:11:08,119 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@60] - Number of threads 4
2015-05-21 15:11:08,119 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@65] - FINISHED TEST METHOD testTxnLogProposalIteratorClosure
2015-05-21 15:11:08,119 [myid:] - INFO  [main:ZKTestCase$1@65] - SUCCEEDED testTxnLogProposalIteratorClosure
2015-05-21 15:11:08,119 [myid:] - INFO  [main:ZKTestCase$1@60] - FINISHED testTxnLogProposalIteratorClosure
2015-05-21 15:11:08,119 [myid:] - INFO  [main:ZKTestCase$1@55] - STARTING testTxnLogOnly
2015-05-21 15:11:08,120 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@50] - RUNNING TEST METHOD testTxnLogOnly
2015-05-21 15:11:08,120 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x7 peerLastZxid=0x4
2015-05-21 15:11:08,120 [myid:] - INFO  [main:LearnerHandler@735] - Use txnlog and committedLog for peer sid: 0
2015-05-21 15:11:08,120 [myid:] - INFO  [main:LearnerHandler@838] - Sending TRUNC zxid=0x3 for peer sid: 0
2015-05-21 15:11:08,121 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x7 peerLastZxid=0x2
2015-05-21 15:11:08,121 [myid:] - INFO  [main:LearnerHandler@735] - Use txnlog and committedLog for peer sid: 0
2015-05-21 15:11:08,121 [myid:] - INFO  [main:LearnerHandler@810] - Sending DIFF zxid=0x7 for peer sid: 0
2015-05-21 15:11:08,121 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x7 peerLastZxid=0x1
2015-05-21 15:11:08,121 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@55] - Memory used 21136
2015-05-21 15:11:08,122 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@60] - Number of threads 4
2015-05-21 15:11:08,122 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@65] - FINISHED TEST METHOD testTxnLogOnly
2015-05-21 15:11:08,122 [myid:] - INFO  [main:ZKTestCase$1@65] - SUCCEEDED testTxnLogOnly
2015-05-21 15:11:08,122 [myid:] - INFO  [main:ZKTestCase$1@60] - FINISHED testTxnLogOnly
2015-05-21 15:11:08,122 [myid:] - INFO  [main:ZKTestCase$1@55] - STARTING testTxnLogWithNegativeZxid
2015-05-21 15:11:08,123 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@50] - RUNNING TEST METHOD testTxnLogWithNegativeZxid
2015-05-21 15:11:08,123 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0xf00000008 minCommittedLog=0xf00000006 lastProcessedZxid=0xf00000009 peerLastZxid=0xf00000004
2015-05-21 15:11:08,123 [myid:] - INFO  [main:LearnerHandler@735] - Use txnlog and committedLog for peer sid: 0
2015-05-21 15:11:08,123 [myid:] - INFO  [main:LearnerHandler@838] - Sending TRUNC zxid=0xf00000003 for peer sid: 0
2015-05-21 15:11:08,124 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0xf00000008 minCommittedLog=0xf00000006 lastProcessedZxid=0xf00000009 peerLastZxid=0xf00000003
2015-05-21 15:11:08,124 [myid:] - INFO  [main:LearnerHandler@735] - Use txnlog and committedLog for peer sid: 0
2015-05-21 15:11:08,124 [myid:] - INFO  [main:LearnerHandler@810] - Sending DIFF zxid=0xf00000008 for peer sid: 0
2015-05-21 15:11:08,124 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@55] - Memory used 21136
2015-05-21 15:11:08,124 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@60] - Number of threads 4
2015-05-21 15:11:08,124 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@65] - FINISHED TEST METHOD testTxnLogWithNegativeZxid
2015-05-21 15:11:08,124 [myid:] - INFO  [main:ZKTestCase$1@65] - SUCCEEDED testTxnLogWithNegativeZxid
2015-05-21 15:11:08,124 [myid:] - INFO  [main:ZKTestCase$1@60] - FINISHED testTxnLogWithNegativeZxid
2015-05-21 15:11:08,125 [myid:] - INFO  [main:ZKTestCase$1@55] - STARTING testNewEpochZxid
2015-05-21 15:11:08,126 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@50] - RUNNING TEST METHOD testNewEpochZxid
2015-05-21 15:11:08,126 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x100000002 minCommittedLog=0x100000001 lastProcessedZxid=0x200000000 peerLastZxid=0x0
2015-05-21 15:11:08,126 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x100000002 minCommittedLog=0x100000001 lastProcessedZxid=0x200000000 peerLastZxid=0x100000000
2015-05-21 15:11:08,126 [myid:] - INFO  [main:LearnerHandler@735] - Use txnlog and committedLog for peer sid: 0
2015-05-21 15:11:08,126 [myid:] - INFO  [main:LearnerHandler@820] - Sending DIFF zxid=0x100000002 for peer sid: 0
2015-05-21 15:11:08,127 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x100000002 minCommittedLog=0x100000001 lastProcessedZxid=0x200000000 peerLastZxid=0x200000000
2015-05-21 15:11:08,127 [myid:] - INFO  [main:LearnerHandler@703] - Sending DIFF zxid=0x200000000 for peer sid: 0
2015-05-21 15:11:08,127 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@55] - Memory used 21136
2015-05-21 15:11:08,127 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@60] - Number of threads 4
2015-05-21 15:11:08,127 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@65] - FINISHED TEST METHOD testNewEpochZxid
2015-05-21 15:11:08,127 [myid:] - INFO  [main:ZKTestCase$1@65] - SUCCEEDED testNewEpochZxid
2015-05-21 15:11:08,127 [myid:] - INFO  [main:ZKTestCase$1@60] - FINISHED testNewEpochZxid
2015-05-21 15:11:08,128 [myid:] - INFO  [main:ZKTestCase$1@55] - STARTING testNewEpochZxidWithTxnlogOnly
2015-05-21 15:11:08,129 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@50] - RUNNING TEST METHOD testNewEpochZxidWithTxnlogOnly
2015-05-21 15:11:08,129 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x600000000 peerLastZxid=0x300000000
2015-05-21 15:11:08,129 [myid:] - INFO  [main:LearnerHandler@735] - Use txnlog and committedLog for peer sid: 0
2015-05-21 15:11:08,129 [myid:] - INFO  [main:LearnerHandler@820] - Sending DIFF zxid=0x600000000 for peer sid: 0
2015-05-21 15:11:08,129 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x600000000 peerLastZxid=0x400000000
2015-05-21 15:11:08,129 [myid:] - INFO  [main:LearnerHandler@735] - Use txnlog and committedLog for peer sid: 0
2015-05-21 15:11:08,129 [myid:] - INFO  [main:LearnerHandler@820] - Sending DIFF zxid=0x600000000 for peer sid: 0
2015-05-21 15:11:08,130 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x600000000 peerLastZxid=0x500000000
2015-05-21 15:11:08,130 [myid:] - INFO  [main:LearnerHandler@735] - Use txnlog and committedLog for peer sid: 0
2015-05-21 15:11:08,130 [myid:] - INFO  [main:LearnerHandler@864] - Sending DIFF zxid=0x600000000 for peer sid: 0
2015-05-21 15:11:08,130 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x600000000 peerLastZxid=0x600000000
2015-05-21 15:11:08,130 [myid:] - INFO  [main:LearnerHandler@703] - Sending DIFF zxid=0x600000000 for peer sid: 0
2015-05-21 15:11:08,130 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@55] - Memory used 21136
2015-05-21 15:11:08,130 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@60] - Number of threads 4
2015-05-21 15:11:08,131 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@65] - FINISHED TEST METHOD testNewEpochZxidWithTxnlogOnly
2015-05-21 15:11:08,131 [myid:] - INFO  [main:ZKTestCase$1@65] - SUCCEEDED testNewEpochZxidWithTxnlogOnly
2015-05-21 15:11:08,131 [myid:] - INFO  [main:ZKTestCase$1@60] - FINISHED testNewEpochZxidWithTxnlogOnly
2015-05-21 15:11:08,131 [myid:] - INFO  [main:ZKTestCase$1@55] - STARTING testDuplicatedTxn
2015-05-21 15:11:08,132 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@50] - RUNNING TEST METHOD testDuplicatedTxn
2015-05-21 15:11:08,132 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x100000002 minCommittedLog=0x100000001 lastProcessedZxid=0x200000000 peerLastZxid=0x100000000
2015-05-21 15:11:08,132 [myid:] - INFO  [main:LearnerHandler@735] - Use txnlog and committedLog for peer sid: 0
2015-05-21 15:11:08,132 [myid:] - INFO  [main:LearnerHandler@820] - Sending DIFF zxid=0x100000002 for peer sid: 0
2015-05-21 15:11:08,132 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@55] - Memory used 21136
2015-05-21 15:11:08,133 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@60] - Number of threads 4
2015-05-21 15:11:08,133 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@65] - FINISHED TEST METHOD testDuplicatedTxn
2015-05-21 15:11:08,133 [myid:] - INFO  [main:ZKTestCase$1@65] - SUCCEEDED testDuplicatedTxn
2015-05-21 15:11:08,133 [myid:] - INFO  [main:ZKTestCase$1@60] - FINISHED testDuplicatedTxn
2015-05-21 15:11:08,133 [myid:] - INFO  [main:ZKTestCase$1@55] - STARTING testCrossEpochTrunc
2015-05-21 15:11:08,134 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@50] - RUNNING TEST METHOD testCrossEpochTrunc
2015-05-21 15:11:08,134 [myid:] - INFO  [main:LearnerHandler@659] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x600000000 peerLastZxid=0x300000001
2015-05-21 15:11:08,134 [myid:] - INFO  [main:LearnerHandler@735] - Use txnlog and committedLog for peer sid: 0
2015-05-21 15:11:08,134 [myid:] - WARN  [main:LearnerHandler@833] - Cannot send TRUNC to peer sid: 0 peer zxid is from different epoch
2015-05-21 15:11:08,135 [myid:] - ERROR [main:LearnerHandler@763] - Unhandled scenario for peer sid: 0 fall back to use snapshot
2015-05-21 15:11:08,135 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@55] - Memory used 21136
2015-05-21 15:11:08,135 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@60] - Number of threads 4
2015-05-21 15:11:08,135 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@65] - FINISHED TEST METHOD testCrossEpochTrunc
2015-05-21 15:11:08,135 [myid:] - INFO  [main:ZKTestCase$1@65] - SUCCEEDED testCrossEpochTrunc
2015-05-21 15:11:08,135 [myid:] - INFO  [main:ZKTestCase$1@60] - FINISHED testCrossEpochTrunc
------------- ---------------- ---------------

Testcase: testEmptyCommittedLog took 0.154 sec
Testcase: testCommittedLog took 0.005 sec
Testcase: testTxnLog took 0.003 sec
Testcase: testTxnLogProposalIteratorClosure took 0.002 sec
Testcase: testTxnLogOnly took 0.003 sec
Testcase: testTxnLogWithNegativeZxid took 0.003 sec
Testcase: testNewEpochZxid took 0.002 sec
Testcase: testNewEpochZxidWithTxnlogOnly took 0.003 sec
Testcase: testDuplicatedTxn took 0.002 sec
Testcase: testCrossEpochTrunc took 0.002 sec
