Testsuite: org.apache.zookeeper.server.quorum.FLEBackwardElectionRoundTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 5.171 sec
------------- Standard Output ---------------
2015-05-21 15:11:01,492 [myid:] - INFO  [main:ZKTestCase$1@55] - STARTING testBackwardElectionRound
2015-05-21 15:11:01,497 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@50] - RUNNING TEST METHOD testBackwardElectionRound
2015-05-21 15:11:01,499 [myid:] - INFO  [main:FLEBackwardElectionRoundTest@91] - TestLE: testBackwardElectionRound, 3
2015-05-21 15:11:01,499 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11221
2015-05-21 15:11:01,503 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11222
2015-05-21 15:11:01,517 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11223
2015-05-21 15:11:01,517 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11224
2015-05-21 15:11:01,517 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11225
2015-05-21 15:11:01,517 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11226
2015-05-21 15:11:01,532 [myid:] - INFO  [main:NIOServerCnxnFactory@673] - Configuring NIO connection handler with 10s sessionless connection timeout, 2 selector thread(s), 24 worker threads, and 64 kB direct buffers.
2015-05-21 15:11:01,538 [myid:] - INFO  [main:NIOServerCnxnFactory@686] - binding to port 0.0.0.0/0.0.0.0:11221
2015-05-21 15:11:01,555 [myid:] - INFO  [main:QuorumPeer@645] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2015-05-21 15:11:01,568 [myid:] - INFO  [main:QuorumPeer@660] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2015-05-21 15:11:01,579 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@550] - My election bind port: 0.0.0.0/0.0.0.0:11222
2015-05-21 15:11:01,584 [myid:] - INFO  [main:FLETestUtils$LEThread@46] - Constructor: Thread-0
2015-05-21 15:11:01,585 [myid:] - INFO  [Thread-0:FLETestUtils$LEThread@54] - Going to call leader election: 0
2015-05-21 15:11:01,585 [myid:] - INFO  [main:NIOServerCnxnFactory@673] - Configuring NIO connection handler with 10s sessionless connection timeout, 2 selector thread(s), 24 worker threads, and 64 kB direct buffers.
2015-05-21 15:11:01,588 [myid:] - INFO  [main:NIOServerCnxnFactory@686] - binding to port 0.0.0.0/0.0.0.0:11223
2015-05-21 15:11:01,589 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@550] - My election bind port: 0.0.0.0/0.0.0.0:11224
2015-05-21 15:11:01,591 [myid:] - INFO  [0.0.0.0/0.0.0.0:11222:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:37625
2015-05-21 15:11:01,593 [myid:] - INFO  [main:NIOServerCnxnFactory@673] - Configuring NIO connection handler with 10s sessionless connection timeout, 2 selector thread(s), 24 worker threads, and 64 kB direct buffers.
2015-05-21 15:11:01,593 [myid:] - INFO  [main:NIOServerCnxnFactory@686] - binding to port 0.0.0.0/0.0.0.0:11225
2015-05-21 15:11:01,594 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@550] - My election bind port: 0.0.0.0/0.0.0.0:11226
2015-05-21 15:11:01,594 [myid:] - INFO  [0.0.0.0/0.0.0.0:11222:QuorumCnxManager$Listener@556] - Received connection request /127.0.0.1:37626
2015-05-21 15:11:01,594 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@273] - Backward compatibility mode (36 bits), server id: 1
2015-05-21 15:11:01,595 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@313] - Backward compatibility mode (before reconfig), server id: 1
2015-05-21 15:11:01,595 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 0 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 1 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)
2015-05-21 15:11:01,595 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@273] - Backward compatibility mode (36 bits), server id: 2
2015-05-21 15:11:01,595 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@313] - Backward compatibility mode (before reconfig), server id: 2
2015-05-21 15:11:01,595 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 0 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 2 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)
2015-05-21 15:11:01,634 [myid:] - INFO  [Thread-0:FastLeaderElection@889] - New election. My id =  0, proposed zxid=0x0
2015-05-21 15:11:01,636 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:11:01,637 [myid:] - INFO  [Thread-0:MBeanRegistry@119] - Unregister MBean [org.apache.ZooKeeperService:name0=LeaderElection]
2015-05-21 15:11:01,637 [myid:] - INFO  [Thread-0:FLETestUtils$LEThread@67] - Finished election: 0, 0
2015-05-21 15:11:01,637 [myid:] - INFO  [Thread-0:FLETestUtils$LEThread@73] - Joining
2015-05-21 15:11:01,637 [myid:] - INFO  [main:FLETestUtils$LEThread@46] - Constructor: Thread-2
2015-05-21 15:11:01,638 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@273] - Backward compatibility mode (36 bits), server id: 1
2015-05-21 15:11:01,638 [myid:] - INFO  [Thread-2:FLETestUtils$LEThread@54] - Going to call leader election: 0
2015-05-21 15:11:01,638 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@313] - Backward compatibility mode (before reconfig), server id: 1
2015-05-21 15:11:01,638 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 0 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 1 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)
2015-05-21 15:11:01,638 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@273] - Backward compatibility mode (36 bits), server id: 2
2015-05-21 15:11:01,638 [myid:] - INFO  [Thread-2:FastLeaderElection@889] - New election. My id =  0, proposed zxid=0x0
2015-05-21 15:11:01,638 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@313] - Backward compatibility mode (before reconfig), server id: 2
2015-05-21 15:11:01,638 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 0 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 2 (n.sid), 0x1 (n.peerEPoch), LOOKING (my state)
2015-05-21 15:11:01,639 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:11:01,841 [myid:] - INFO  [Thread-2:FastLeaderElection@923] - Notification time out: 400
2015-05-21 15:11:01,841 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:11:02,242 [myid:] - INFO  [Thread-2:FastLeaderElection@923] - Notification time out: 800
2015-05-21 15:11:02,243 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:11:03,044 [myid:] - INFO  [Thread-2:FastLeaderElection@923] - Notification time out: 1600
2015-05-21 15:11:03,045 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:11:04,646 [myid:] - INFO  [Thread-2:FastLeaderElection@923] - Notification time out: 3200
2015-05-21 15:11:04,647 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@683] - Notification: 2 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)0 (n.config version)
2015-05-21 15:11:06,638 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@55] - Memory used 55482
2015-05-21 15:11:06,638 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@60] - Number of threads 18
2015-05-21 15:11:06,638 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@65] - FINISHED TEST METHOD testBackwardElectionRound
2015-05-21 15:11:06,639 [myid:] - INFO  [0.0.0.0/0.0.0.0:11224:QuorumCnxManager$Listener@578] - Leaving listener
2015-05-21 15:11:06,640 [myid:] - INFO  [0.0.0.0/0.0.0.0:11226:QuorumCnxManager$Listener@578] - Leaving listener
2015-05-21 15:11:06,642 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:11:06,643 [myid:] - INFO  [main:ZKTestCase$1@65] - SUCCEEDED testBackwardElectionRound
2015-05-21 15:11:06,642 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@836] - Connection broken for id 0, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(SocketInputStream.java:152)
	at java.net.SocketInputStream.read(SocketInputStream.java:122)
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:11:06,647 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:11:06,642 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@836] - Connection broken for id 0, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(SocketInputStream.java:152)
	at java.net.SocketInputStream.read(SocketInputStream.java:122)
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:11:06,648 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:11:06,642 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@836] - Connection broken for id 2, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:11:06,648 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:11:06,642 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@836] - Connection broken for id 1, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:821)
2015-05-21 15:11:06,650 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@839] - Interrupting SendWorker
2015-05-21 15:11:06,642 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:11:06,651 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 0 my id = 2
2015-05-21 15:11:06,650 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:11:06,651 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 1 my id = 0
2015-05-21 15:11:06,649 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@753] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2017)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2095)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:389)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:905)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:741)
2015-05-21 15:11:06,652 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 2 my id = 0
2015-05-21 15:11:06,646 [myid:] - INFO  [main:ZKTestCase$1@60] - FINISHED testBackwardElectionRound
2015-05-21 15:11:06,646 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@762] - Send worker leaving thread  id 0 my id = 1
------------- ---------------- ---------------

Testcase: testBackwardElectionRound took 5.161 sec
